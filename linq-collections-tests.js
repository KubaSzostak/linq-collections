!function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=14)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){function t(e){if(!0!==e)throw new Error("Assertion failed")}function r(e){t(!1===e)}e.isTrue=t,e.isFalse=r,e.isEqual=function(e,r){t(e===r)},e.isNotEqual=function(e,t){r(e===t)},e.isArrayEqual=function(e,r){t(e.length===r.length&&e.every(function(e,t){return e===r[t]}))},e.isArrayNotEqual=function(e,t){r(e.length===t.length&&e.every(function(e,r){return e===t[r]}))},e.throwsException=function(e){try{e()}catch(e){return}throw new Error("Exception was expected")}}(t.Test||(t.Test={}))},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(2),u=r(4),o=function(){function e(){}return e.prototype.toList=function(){return new c(this.toArray())},e.prototype.toDictionary=function(e,t){return f.fromArray(this.toArray(),e,t)},e.prototype.reverse=function(){return new a.ReverseEnumerable(this.asEnumerable())},e.prototype.concat=function(e){for(var t,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];return(t=this.asEnumerable()).concat.apply(t,[e].concat(r))},e.prototype.contains=function(e){return this.any(function(t){return t===e})},e.prototype.where=function(e){return new a.ConditionalEnumerable(this.asEnumerable(),e)},e.prototype.select=function(e){return new a.TransformEnumerable(this.asEnumerable(),e)},e.prototype.selectMany=function(e){return this.select(function(t){var r=e(t);return r instanceof Array?new a.ArrayEnumerable(r):r.asEnumerable()}).toArray().reduce(function(e,t){return new a.ConcatEnumerable(e,t)},a.Enumerable.empty())},e.prototype.elementAt=function(e){var t=this.elementAtOrDefault(e);if(void 0===t)throw new Error("Out of bounds");return t},e.prototype.except=function(e){return this.asEnumerable().except(e)},e.prototype.first=function(e){var t;if(void 0===(t=void 0!==e?this.firstOrDefault(e):this.firstOrDefault()))throw new Error("Sequence contains no elements");return t},e.prototype.groupBy=function(e,t){for(var r=this.toArray(),n=new f,i=0;i<r.length;++i){var a=e(r[i]),u=void 0!==t?t(r[i]):r[i];n.containsKey(a)||n.set(a,new c),n.get(a).push(u)}return n.asEnumerable()},e.prototype.last=function(e){var t;if(void 0===(t=void 0!==e?this.lastOrDefault(e):this.lastOrDefault()))throw new Error("Sequence contains no elements");return t},e.prototype.single=function(e){var t;if(void 0===(t=void 0!==e?this.singleOrDefault(e):this.singleOrDefault()))throw new Error("Sequence contains no elements");return t},e.prototype.singleOrDefault=function(e){return void 0!==e?this.asEnumerable().singleOrDefault(e):this.asEnumerable().singleOrDefault()},e.prototype.skipWhile=function(e){return this.asEnumerable().skipWhile(e)},e.prototype.takeWhile=function(e){return this.asEnumerable().takeWhile(e)},e.prototype.sequenceEqual=function(e,t){return void 0!==t?this.asEnumerable().sequenceEqual(e,t):this.asEnumerable().sequenceEqual(e)},e.prototype.distinct=function(e){return new a.UniqueEnumerable(this.asEnumerable(),e)},e.prototype.min=function(e){return void 0!==e?new a.TransformEnumerable(this.asEnumerable(),e).min():this.aggregate(function(e,t){return void 0!==e&&e<t?e:t})},e.prototype.orderBy=function(e,t){return new a.OrderedEnumerable(this.asEnumerable(),u.createComparer(e,!0,t))},e.prototype.orderByDescending=function(e){return new a.OrderedEnumerable(this.asEnumerable(),u.createComparer(e,!1,void 0))},e.prototype.max=function(e){return void 0!==e?new a.TransformEnumerable(this.asEnumerable(),e).max():this.aggregate(function(e,t){return void 0!==e&&e>t?e:t})},e.prototype.sum=function(e){return this.aggregate(function(t,r){return t+e(r)},0)},e.prototype.skip=function(e){return new a.RangeEnumerable(this.asEnumerable(),e,void 0)},e.prototype.take=function(e){return new a.RangeEnumerable(this.asEnumerable(),void 0,e)},e.prototype.union=function(e){return new a.UniqueEnumerable(this.concat(e))},e.prototype.aggregate=function(e,t){return void 0!==t?this.asEnumerable().aggregate(e,t):this.asEnumerable().aggregate(e)},e.prototype.any=function(e){return void 0!==e?this.asEnumerable().any(e):this.asEnumerable().any()},e.prototype.all=function(e){return this.asEnumerable().all(e)},e.prototype.average=function(e){return this.asEnumerable().average(e)},e.prototype.count=function(e){return void 0!==e?this.asEnumerable().count(e):this.asEnumerable().count()},e.prototype.elementAtOrDefault=function(e){return this.asEnumerable().elementAtOrDefault(e)},e.prototype.firstOrDefault=function(e){return void 0!==e?this.asEnumerable().firstOrDefault(e):this.asEnumerable().firstOrDefault()},e.prototype.lastOrDefault=function(e){return void 0!==e?this.asEnumerable().lastOrDefault(e):this.asEnumerable().lastOrDefault()},e.prototype.forEach=function(e){return this.asEnumerable().forEach(e)},e.prototype.defaultIfEmpty=function(e){return void 0!==e?this.asEnumerable().defaultIfEmpty(e):this.asEnumerable().defaultIfEmpty()},e}();t.EnumerableCollection=o;var s=function(e){function t(t){void 0===t&&(t=[]);var r=e.call(this)||this;return r.source=t,r}return i(t,e),t.prototype.asArray=function(){return this.source},t.prototype.toArray=function(){return[].concat(this.source)},t.prototype.toList=function(){return new c(this.toArray())},t.prototype.asEnumerable=function(){return new a.ArrayEnumerable(this.source)},t.prototype.aggregate=function(e,t){return void 0!==t?this.source.reduce(e,t):this.source.reduce(e)},t.prototype.any=function(e){return void 0!==e?this.source.some(e):this.source.length>0},t.prototype.all=function(e){return this.source.every(e)},t.prototype.average=function(e){if(0===this.count())throw new Error("Sequence contains no elements");for(var t=0,r=0,n=this.source.length;r<n;++r)t+=e(this.source[r]);return t/this.source.length},t.prototype.count=function(e){return void 0!==e?this.source.filter(e).length:this.source.length},t.prototype.elementAtOrDefault=function(e){if(e<0)throw new Error("Negative index is forbiden");return this.source[e]},t.prototype.firstOrDefault=function(e){return void 0!==e?this.source.filter(e)[0]:this.source[0]},t.prototype.groupBy=function(e,t){for(var r=this.asArray(),n=new f,i=0;i<r.length;++i){var a=e(r[i]),u=void 0!==t?t(r[i]):r[i];n.containsKey(a)||n.set(a,new c),n.get(a).push(u)}return n.asEnumerable()},t.prototype.lastOrDefault=function(e){if(void 0!==e){var t=this.source.filter(e);return t[t.length-1]}return this.source[this.source.length-1]},t.prototype.forEach=function(e){for(var t=0,r=this.source.length;t<r;++t)e(this.source[t],t)},t.prototype.sequenceEqual=function(e,r){if(void 0===r&&(r=u.strictEqualityComparer()),e instanceof t||e instanceof Array){var n=this.asArray(),i=e instanceof t?e.asArray():e;if(n.length!=i.length)return!1;for(var a=0;a<n.length;++a)if(!r(n[a],i[a]))return!1;return!0}return this.asEnumerable().sequenceEqual(e,r)},t}(o);t.ArrayQueryable=s;var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.copy=function(){return new t(this.toArray())},t.prototype.asReadOnly=function(){return this},t.prototype.clear=function(){this.source=[]},t.prototype.remove=function(e){for(var t=[],r=0,n=this.source.length;r<n;++r)this.source[r]!==e&&t.push(this.source[r]);this.source=t},t.prototype.removeAt=function(e){if(e<0||void 0===this.source[e])throw new Error("Out of bounds");return this.source.splice(e,1)[0]},t.prototype.get=function(e){return this.source[e]},t.prototype.push=function(e){return this.source.push(e)},t.prototype.pushRange=function(e){return e instanceof Array||(e=e.toArray()),this.source.push.apply(this.source,e)},t.prototype.pushFront=function(e){return this.source.unshift(e)},t.prototype.pop=function(){return this.source.pop()},t.prototype.popFront=function(){return this.source.shift()},t.prototype.set=function(e,t){if(e<0)throw new Error("Out of bounds");this.source[e]=t},t.prototype.insert=function(e,t){if(e<0||e>this.source.length)throw new Error("Out of bounds");this.source.splice(e,0,t)},t.prototype.indexOf=function(e){return this.source.indexOf(e)},t}(s);t.List=c;var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.copy=function(){return new t(this.toArray())},t.prototype.clear=function(){this.source=[]},t.prototype.peek=function(){return this.source[this.source.length-1]},t.prototype.pop=function(){return this.source.pop()},t.prototype.push=function(e){return this.source.push(e)},t}(s);t.Stack=l;var f=function(e){function t(t){var r=e.call(this)||this;if(r.clear(),void 0!==t)for(var n=0;n<t.length;++n){var i=t[n];r.set(i.key,i.value)}return r}return i(t,e),t.fromArray=function(e,r,n){return new t(e.map(function(e){return{key:r(e),value:n(e)}}))},t.fromJsObject=function(e){return new t(new c(Object.getOwnPropertyNames(e)).select(function(t){return{key:t,value:e[t]}}).toArray())},t.prototype.copy=function(){return new t(this.toArray())},t.prototype.asReadOnly=function(){return this},t.prototype.asEnumerable=function(){return new a.ArrayEnumerable(this.toArray())},t.prototype.toArray=function(){var e=this;return this.getKeys().select(function(t){return{key:t,value:e.dictionary[t]}}).toArray()},t.prototype.clear=function(){this.dictionary={}},t.prototype.containsKey=function(e){return this.dictionary.hasOwnProperty(e)},t.prototype.containsValue=function(e){for(var t=this.getKeysFast(),r=0;r<t.length;++r)if(this.dictionary[t[r]]===e)return!0;return!1},t.prototype.getKeys=function(){var e=this,t=this.getKeysFast();return new c(t.map(function(t){return"number"===e.keyType?parseFloat(t):t}))},t.prototype.getKeysFast=function(){return Object.getOwnPropertyNames(this.dictionary)},t.prototype.getValues=function(){for(var e=this.getKeysFast(),t=new Array(e.length),r=0;r<e.length;++r)t[r]=this.dictionary[e[r]];return new c(t)},t.prototype.remove=function(e){this.containsKey(e)&&delete this.dictionary[e]},t.prototype.get=function(e){if(!this.containsKey(e))throw new Error("Key doesn't exist: "+e);return this.dictionary[e]},t.prototype.set=function(e,t){if(this.containsKey(e))throw new Error("Key already exists: "+e);this.setOrUpdate(e,t)},t.prototype.setOrUpdate=function(e,t){void 0===this.keyType&&(this.keyType=typeof e),this.dictionary[e]=t},t}(o);t.Dictionary=f},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3),u=r(4),o=r(1),s=r(5),c=function(){function e(e){this.source=e}return e.prototype.reset=function(){this.source.reset()},e.prototype.next=function(){return this.source.next()},e.prototype.asEnumerable=function(){return this},e.prototype.toArray=function(){var e=[];for(this.reset();this.next();)e.push(this.value());return e},e.prototype.toList=function(){return new o.List(this.toArray())},e.prototype.toDictionary=function(e,t){return o.Dictionary.fromArray(this.toArray(),e,t)},e.prototype.count=function(e){if(void 0!==e)return new f(this,e).count();var t=0;for(this.reset();this.next();)++t;return t>>>0},e.prototype.any=function(e){return void 0!==e?new f(this,e).any():(this.reset(),this.next())},e.prototype.all=function(e){for(this.reset();this.next();)if(!e(this.value()))return!1;return!0},e.prototype.reverse=function(){return new T(this.copy())},e.prototype.contains=function(e){return this.any(function(t){return t===e})},e.prototype.sequenceEqual=function(e,t){void 0===t&&(t=u.strictEqualityComparer());var r=e instanceof Array?new A(e):e.asEnumerable();for(this.reset(),r.reset();this.next();)if(!r.next()||!t(this.value(),r.value()))return!1;return!r.next()},e.prototype.where=function(e){return new f(this.copy(),e)},e.prototype.select=function(e){return new d(this.copy(),e)},e.prototype.selectMany=function(e){return this.select(function(t){var r=e(t);return Array.isArray(r)?new A(r):r.asEnumerable()}).toArray().reduce(function(e,t){return new h(e,t)},l.empty())},e.prototype.skipWhile=function(e){return new y(this.copy(),e)},e.prototype.concat=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];for(var n=function(e){return e instanceof Array?new A(e):e.asEnumerable()},i=new h(this.copy(),n(e).copy()),a=0,u=t.length;a<u;++a)i=new h(i,n(t[a]).copy());return i},e.prototype.defaultIfEmpty=function(e){return new q(this,e)},e.prototype.elementAt=function(e){var t=this.elementAtOrDefault(e);if(void 0===t)throw new Error("Out of bounds");return t},e.prototype.elementAtOrDefault=function(e){if(e<0)throw new Error("Negative index is forbiden");this.reset();for(var t=-1;this.next()&&++t!==e;);if(t===e)return this.value()},e.prototype.except=function(e){return this.where(function(t){return!e.contains(t)})},e.prototype.first=function(e){var t;if(void 0===(t=void 0!==e?this.firstOrDefault(e):this.firstOrDefault()))throw new Error("Sequence contains no elements");return t},e.prototype.firstOrDefault=function(e){return void 0!==e?new f(this,e).firstOrDefault():(this.reset(),this.next()?this.value():void 0)},e.prototype.forEach=function(e){this.reset();for(var t=0;this.next();++t)e(this.value(),t)},e.prototype.groupBy=function(e,t){for(var r=this.toArray(),n=new o.Dictionary,i=0;i<r.length;++i){var a=e(r[i]),u=void 0!==t?t(r[i]):r[i];n.containsKey(a)||n.set(a,new o.List),n.get(a).push(u)}return n.asEnumerable()},e.prototype.last=function(e){var t;if(void 0===(t=void 0!==e?this.lastOrDefault(e):this.lastOrDefault()))throw new Error("Sequence contains no elements");return t},e.prototype.lastOrDefault=function(e){if(void 0!==e)return new f(this,e).lastOrDefault();var t=new T(this);return t.reset(),t.next()?t.value():void 0},e.prototype.single=function(e){var t;if(void 0===(t=void 0!==e?this.singleOrDefault(e):this.singleOrDefault()))throw new Error("Sequence contains no elements");return t},e.prototype.singleOrDefault=function(e){if(void 0!==e)return new f(this,e).singleOrDefault();if(this.reset(),this.next()){var t=this.value();if(this.next())throw new Error("Sequence contains more than 1 element");return t}},e.prototype.distinct=function(e){return new E(this.copy(),e)},e.prototype.aggregate=function(e,t){var r=t;if(this.reset(),void 0===t){if(!this.next())throw new Error("Sequence contains no elements");r=e(r,this.value())}for(;this.next();)r=e(r,this.value());return r},e.prototype.min=function(e){return void 0!==e?new d(this,e).min():this.aggregate(function(e,t){return void 0!==e&&e<t?e:t})},e.prototype.orderBy=function(e,t){return new m(this.copy(),u.createComparer(e,!0,t))},e.prototype.orderByDescending=function(e){return new m(this.copy(),u.createComparer(e,!1,void 0))},e.prototype.max=function(e){return void 0!==e?new d(this,e).max():this.aggregate(function(e,t){return void 0!==e&&e>t?e:t})},e.prototype.sum=function(e){return this.aggregate(function(t,r){return t+e(r)},0)},e.prototype.average=function(e){if(this.reset(),!this.next())throw new Error("Sequence contains no elements");var t=0,r=0;do{t+=e(this.value()),++r}while(this.next());return t/r},e.prototype.skip=function(e){return new v(this.copy(),e,void 0)},e.prototype.take=function(e){return new v(this.copy(),void 0,e)},e.prototype.takeWhile=function(e){return new p(this.copy(),e)},e.prototype.union=function(e){return new E(this.concat(e))},e}();t.EnumerableBase=c;var l=function(e){function t(t){var r=e.call(this,t)||this;return r.currentValue=new s.Cached,r}return i(t,e),t.fromSource=function(e){return e instanceof Array?new A(e):new t(e)},t.empty=function(){return t.fromSource([])},t.range=function(e,t,r){if(void 0===r&&(r=!0),t<0)throw new Error("Count must be >= 0");var n=new Array(t);if(r)for(var i=0;i<t;n[i]=e+i++);else for(i=0;i<t;n[i]=e-i++);return new A(n)},t.repeat=function(e,t){if(t<0)throw new Error("Count must me >= 0");for(var r=new Array(t),n=0;n<t;++n)r[n]=e;return new A(r)},t.prototype.copy=function(){return new t(this.source.copy())},t.prototype.value=function(){return this.currentValue.isValid()||(this.currentValue.value=this.source.value()),this.currentValue.value},t.prototype.reset=function(){e.prototype.reset.call(this),this.currentValue.invalidate()},t.prototype.next=function(){return this.currentValue.invalidate(),e.prototype.next.call(this)},t}(c);t.Enumerable=l;var f=function(e){function t(t,r){var n=e.call(this,t)||this;return n.source=t,n._predicate=r,n}return i(t,e),t.prototype.copy=function(){return new t(this.source.copy(),this._predicate)},t.prototype.next=function(){var t;do{t=e.prototype.next.call(this)}while(t&&!this._predicate(this.value()));return t},t}(l);t.ConditionalEnumerable=f;var y=function(e){function t(t,r){var n=e.call(this,t)||this;return n.source=t,n._predicate=r,n._shouldContinueChecking=!0,n}return i(t,e),t.prototype.reset=function(){e.prototype.reset.call(this),this._shouldContinueChecking=!0},t.prototype.copy=function(){return new t(this.source.copy(),this._predicate)},t.prototype.next=function(){if(!this._shouldContinueChecking)return e.prototype.next.call(this);var t;do{t=e.prototype.next.call(this)}while(t&&this._predicate(this.value()));return this._shouldContinueChecking=!1,t},t}(l);t.SkipWhileEnumerable=y;var p=function(e){function t(t,r){var n=e.call(this,t)||this;return n.source=t,n._predicate=r,n._shouldContinueTaking=!0,n}return i(t,e),t.prototype.reset=function(){e.prototype.reset.call(this),this._shouldContinueTaking=!0},t.prototype.copy=function(){return new t(this.source.copy(),this._predicate)},t.prototype.next=function(){return!!(e.prototype.next.call(this)&&this._shouldContinueTaking&&this._predicate(this.value()))||(this._shouldContinueTaking=!1,!1)},t}(l);t.TakeWhileEnumerable=p;var h=function(e){function t(t,r){var n=e.call(this,t)||this;return n._otherSource=r,n._isFirstSourceFinished=!1,n}return i(t,e),t.prototype.copy=function(){return new t(this.source.copy(),this._otherSource.copy())},t.prototype.reset=function(){this.source.reset(),this._otherSource.reset(),this._isFirstSourceFinished=!1,this.currentValue.invalidate()},t.prototype.next=function(){this.currentValue.invalidate();var e=this._isFirstSourceFinished?this._otherSource.next():this.source.next();return e||this._isFirstSourceFinished?e:(this._isFirstSourceFinished=!0,this.next())},t.prototype.value=function(){return this.currentValue.isValid()||(this.currentValue.value=this._isFirstSourceFinished?this._otherSource.value():this.source.value()),this.currentValue.value},t}(l);t.ConcatEnumerable=h;var E=function(e){function t(t,r){var n=e.call(this,t)||this;return n.source=t,n._keySelector=r,n._seen={primitive:{number:{},string:{},boolean:{}},complex:[]},n}return i(t,e),t.prototype.copy=function(){return new t(this.source.copy(),this._keySelector)},t.prototype.reset=function(){e.prototype.reset.call(this),this._seen={primitive:{number:{},string:{},boolean:{}},complex:[]}},t.prototype.isUnique=function(e){var t=void 0!==this._keySelector?this._keySelector(e):e,r=typeof t;return r in this._seen.primitive?!this._seen.primitive[r].hasOwnProperty(t)&&(this._seen.primitive[r][t]=!0):-1===this._seen.complex.indexOf(t)&&this._seen.complex.push(t)>-1},t.prototype.next=function(){var t;do{t=e.prototype.next.call(this)}while(t&&!this.isUnique(this.value()));return t},t}(l);t.UniqueEnumerable=E;var v=function(e){function t(t,r,n){var i=e.call(this,t)||this;if(i.source=t,void 0!==r&&r<0||void 0!==n&&n<0)throw new Error("Incorrect parameters");return i._start=r,i._count=n,i._currentIndex=-1,i}return i(t,e),t.prototype.copy=function(){return new t(this.source.copy(),this._start,this._count)},t.prototype.reset=function(){e.prototype.reset.call(this),this._currentIndex=-1},t.prototype.isValidIndex=function(){var e=void 0!==this._start?this._start:0,t=void 0!==this._count?e+this._count:void 0;return this._currentIndex>=e&&(void 0===t||this._currentIndex<t)},t.prototype.performSkip=function(){for(var t=void 0!==this._start?this._start:0,r=!0;r&&this._currentIndex+1<t;)r=e.prototype.next.call(this),++this._currentIndex;return r},t.prototype.next=function(){return!(this._currentIndex<0&&!this.performSkip())&&(++this._currentIndex,e.prototype.next.call(this)&&this.isValidIndex())},t.prototype.value=function(){if(!this.isValidIndex())throw new Error("Out of bounds");return e.prototype.value.call(this)},t}(l);t.RangeEnumerable=v;var d=function(e){function t(t,r){var n=e.call(this,t)||this;return n.source=t,n._transform=r,n._currentValue=new s.Cached,n}return i(t,e),t.prototype.copy=function(){return new t(this.source.copy(),this._transform)},t.prototype.value=function(){return this._currentValue.isValid()||(this._currentValue.value=this._transform(this.source.value())),this._currentValue.value},t.prototype.reset=function(){e.prototype.reset.call(this),this._currentValue.invalidate()},t.prototype.next=function(){return this._currentValue.invalidate(),e.prototype.next.call(this)},t}(c);t.TransformEnumerable=d;var T=function(e){function t(t){var r=e.call(this,t)||this;return r.source=t,r._elements=new s.Cached,r._currentIndex=-1,r}return i(t,e),t.prototype.copy=function(){return new t(this.source.copy())},t.prototype.reset=function(){this._elements.invalidate(),this._currentIndex=-1},t.prototype.isValidIndex=function(){return this._currentIndex>=0&&this._currentIndex<this._elements.value.length},t.prototype.all=function(e){return this.source.all(e)},t.prototype.any=function(e){return void 0!==e?this.source.any(e):this.source.any()},t.prototype.average=function(e){return this.source.average(e)},t.prototype.count=function(e){return void 0!==e?this.source.count(e):this.source.count()},t.prototype.max=function(e){return void 0!==e?this.source.max(e):this.source.max()},t.prototype.min=function(e){return void 0!==e?this.source.min(e):this.source.min()},t.prototype.reverse=function(){return this.source.copy()},t.prototype.sum=function(e){return this.source.sum(e)},t.prototype.next=function(){return this._elements.isValid()||(this._elements.value=this.source.toArray()),++this._currentIndex,this.isValidIndex()},t.prototype.value=function(){if(!this._elements.isValid()||!this.isValidIndex())throw new Error("Out of bounds");return this._elements.value[this._elements.value.length-1-this._currentIndex]},t}(l);t.ReverseEnumerable=T;var m=function(e){function t(t,r){var n=e.call(this,t)||this;return n.source=t,n._comparer=r,n._elements=new s.Cached,n._currentIndex=-1,n}return i(t,e),t.prototype.isValidIndex=function(){return this._currentIndex>=0&&this._currentIndex<this._elements.value.length},t.prototype.orderBy=function(e,r){return new t(this.source.copy(),u.createComparer(e,!0,r))},t.prototype.orderByDescending=function(e){return new t(this.source.copy(),u.createComparer(e,!1,void 0))},t.prototype.thenBy=function(e,r){return new t(this.source.copy(),u.combineComparers(this._comparer,u.createComparer(e,!0,r)))},t.prototype.thenByDescending=function(e){return new t(this.source.copy(),u.combineComparers(this._comparer,u.createComparer(e,!1,void 0)))},t.prototype.reset=function(){this._elements.invalidate(),this._currentIndex=-1},t.prototype.copy=function(){return new t(this.source.copy(),this._comparer)},t.prototype.value=function(){if(!this._elements.isValid()||!this.isValidIndex())throw new Error("Out of bounds");return this._elements.value[this._currentIndex]},t.prototype.next=function(){return this._elements.isValid()||(this._elements.value=this.toArray()),++this._currentIndex,this.isValidIndex()},t.prototype.toArray=function(){return this.source.toArray().sort(this._comparer)},t}(c);t.OrderedEnumerable=m;var A=function(e){function t(t){var r=e.call(this,new a.ArrayIterator(t))||this;return r.list=new o.List(t),r}return i(t,e),t.prototype.toArray=function(){return this.list.toArray()},t.prototype.aggregate=function(e,t){return void 0!==t?this.list.aggregate(e,t):this.list.aggregate(e)},t.prototype.any=function(e){return void 0!==e?this.list.any(e):this.list.any()},t.prototype.all=function(e){return this.list.all(e)},t.prototype.average=function(e){return this.list.average(e)},t.prototype.count=function(e){return void 0!==e?this.list.count(e):this.list.count()},t.prototype.copy=function(){return new t(this.list.asArray())},t.prototype.elementAtOrDefault=function(e){return this.list.elementAtOrDefault(e)},t.prototype.firstOrDefault=function(e){return void 0!==e?this.list.firstOrDefault(e):this.list.firstOrDefault()},t.prototype.lastOrDefault=function(e){return void 0!==e?this.list.lastOrDefault(e):this.list.lastOrDefault()},t}(l);t.ArrayEnumerable=A;var q=function(e){function t(t,r){var n=e.call(this,t)||this;return n.source=t,n._mustUseDefaultValue=void 0,n._defaultValue=r,n}return i(t,e),t.prototype.copy=function(){return new t(this.source.copy(),this._defaultValue)},t.prototype.value=function(){return this._mustUseDefaultValue?this._defaultValue:this.source.value()},t.prototype.next=function(){var t=e.prototype.next.call(this);return this._mustUseDefaultValue=!t&&void 0===this._mustUseDefaultValue,this._mustUseDefaultValue||t},t.prototype.reset=function(){e.prototype.reset.call(this),this._mustUseDefaultValue=void 0},t}(c);t.DefaultIfEmptyEnumerable=q},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this._index=-1,this.source=e,this.reset()}return e.prototype.copy=function(){return new e(this.source)},e.prototype.reset=function(){this._index=-1},e.prototype.isValidIndex=function(){return this._index>=0&&this._index<this.source.length},e.prototype.next=function(){return++this._index,this.isValidIndex()},e.prototype.value=function(){if(!this.isValidIndex())throw new Error("Out of bounds");return this.source[this._index]},e}();t.ArrayIterator=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.strictEqualityComparer=function(){return function(e,t){return e===t}},t.combineComparers=function(e,t){return function(r,n){return e(r,n)||t(r,n)}},t.createComparer=function(e,t,r){return void 0!==r?function(t,n){return r(e(t),e(n))}:t?function(t,r){var n=e(t),i=e(r);return n<i?-1:n>i?1:0}:function(t,r){var n=e(t),i=e(r);return n<i?1:n>i?-1:0}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this._isValid=!1}return e.prototype.invalidate=function(){this._isValid=!1},e.prototype.isValid=function(){return this._isValid},Object.defineProperty(e.prototype,"value",{get:function(){if(!this._isValid)throw new Error("Trying to get value of invalid cache");return this._value},set:function(e){this._value=e,this._isValid=!0},enumerable:!0,configurable:!0}),e}();t.Cached=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=r(1);!function(e){function t(){it("Empty object",function(){var e=i.Dictionary.fromJsObject({});n.Test.isArrayEqual(e.getKeys().toArray(),[])}),it("Single property (string)",function(){var e=i.Dictionary.fromJsObject({hello:"hola"});n.Test.isArrayEqual(e.getKeys().toArray(),["hello"]),n.Test.isEqual(e.get("hello"),"hola")}),it("Single property (number)",function(){var e=i.Dictionary.fromJsObject({hello:123});n.Test.isArrayEqual(e.getKeys().toArray(),["hello"]),n.Test.isEqual(e.get("hello"),123)}),it("Multiple properties (string)",function(){var e=i.Dictionary.fromJsObject({hello:"hola",bye:"adios"});n.Test.isArrayEqual(e.getKeys().toArray(),["hello","bye"]),n.Test.isArrayEqual(e.getValues().toArray(),["hola","adios"]),n.Test.isEqual(e.get("hello"),"hola"),n.Test.isEqual(e.get("bye"),"adios")}),it("Multiple properties (number)",function(){var e=i.Dictionary.fromJsObject({hello:123,bye:666});n.Test.isArrayEqual(e.getKeys().toArray(),["hello","bye"]),n.Test.isArrayEqual(e.getValues().toArray(),[123,666]),n.Test.isEqual(e.get("hello"),123),n.Test.isEqual(e.get("bye"),666)})}function r(){it("Same object but different interface",function(){var e=new i.Dictionary([{key:"hello",value:"yesssss"}]);n.Test.isEqual(e,e.asReadOnly())})}function a(){it("Type is a Dictionary",function(){var e=new i.Dictionary;n.Test.isTrue(e instanceof i.Dictionary)}),it("Returns a copy, not a reference",function(){var e=new i.Dictionary,t=e.copy();n.Test.isArrayEqual(e.toArray(),t.toArray()),e.set("lol",666),n.Test.isArrayNotEqual(e.toArray(),t.toArray()),n.Test.isArrayEqual(e.toList().select(function(e){return e.value}).toArray(),[666]),n.Test.isArrayEqual(t.toList().select(function(e){return e.value}).toArray(),[])})}function u(){it("Does nothing on empty dictionary",function(){var e=new i.Dictionary;n.Test.isArrayEqual(e.toArray(),[]),e.clear(),n.Test.isArrayEqual(e.toArray(),[]),e.clear(),n.Test.isArrayEqual(e.toArray(),[])}),it("Dictionary is cleared",function(){var e=new i.Dictionary([{key:1,value:1},{key:2,value:2}]);n.Test.isArrayEqual(e.select(function(e){return e.value}).toArray(),[1,2]),e.clear(),n.Test.isArrayEqual(e.toArray(),[])})}function o(){it("Value is correct (number)",function(){var e=new i.Dictionary([{key:1,value:1},{key:2,value:2}]);n.Test.isEqual(e.get(1),1),n.Test.isEqual(e.get(2),2)}),it("Value is correct (string)",function(){var e=new i.Dictionary([{key:"Hello",value:"Hola"},{key:"Bye",value:"Adios"}]);n.Test.isEqual(e.get("Hello"),"Hola"),n.Test.isEqual(e.get("Bye"),"Adios")}),it("Exception if invalid key",function(){var e=new i.Dictionary([{key:"Hello",value:"Hola"}]);n.Test.throwsException(function(){return e.get("Bye")}),n.Test.throwsException(function(){return e.get(":(")})})}function s(){it("Value is set correctly",function(){var e=new i.Dictionary;e.set("hola","hello"),n.Test.isEqual(e.get("hola"),"hello")}),it("Throws exception if key already exists",function(){var e=new i.Dictionary([{key:"hola",value:"hello"}]);n.Test.throwsException(function(){return e.set("hola","nope")})})}function c(){it("Value is set correctly",function(){var e=new i.Dictionary;e.setOrUpdate("hola","hello"),n.Test.isEqual(e.get("hola"),"hello")}),it("Replace value if key already exists",function(){var e=new i.Dictionary([{key:"hola",value:"hello"}]);e.setOrUpdate("hola","nope"),n.Test.isEqual(e.get("hola"),"nope")})}function l(){it("Returns correct value",function(){var e=new i.Dictionary([{key:1,value:101},{key:22,value:122}]);n.Test.isTrue(e.containsKey(1)),n.Test.isTrue(e.containsKey(22)),n.Test.isFalse(e.containsKey(-1)),n.Test.isFalse(e.containsKey(0)),n.Test.isFalse(e.containsKey(2)),n.Test.isFalse(e.containsKey(101)),n.Test.isFalse(e.containsKey(122)),n.Test.isFalse(e.containsKey(5)),e.set(5,105),n.Test.isTrue(e.containsKey(5))})}function f(){it("Returns correct value",function(){var e=new i.Dictionary([{key:1,value:101},{key:22,value:122}]);n.Test.isTrue(e.containsValue(101)),n.Test.isTrue(e.containsValue(122)),n.Test.isFalse(e.containsValue(-1)),n.Test.isFalse(e.containsValue(0)),n.Test.isFalse(e.containsValue(2)),n.Test.isFalse(e.containsValue(1)),n.Test.isFalse(e.containsValue(22)),n.Test.isFalse(e.containsValue(105)),e.set(5,105),n.Test.isTrue(e.containsValue(105))})}function y(){it("Returns correct value (number)",function(){var e=new i.Dictionary([{key:1,value:101},{key:22,value:122}]);n.Test.isArrayEqual(e.getKeys().asArray(),[1,22])}),it("Returns correct value (string)",function(){var e=new i.Dictionary([{key:"hola",value:101},{key:"adios",value:122}]);n.Test.isArrayEqual(e.getKeys().asArray(),["hola","adios"])})}function p(){it("Returns correct value (number)",function(){var e=new i.Dictionary([{key:1,value:101},{key:22,value:122}]);n.Test.isArrayEqual(e.getValues().asArray(),[101,122])}),it("Returns correct value (string)",function(){var e=new i.Dictionary([{key:"hola",value:"iepe"},{key:"adios",value:"talue"}]);n.Test.isArrayEqual(e.getValues().asArray(),["iepe","talue"])})}function h(){it("Does nothing if key doesn't exist",function(){var e=new i.Dictionary([{key:1,value:101},{key:22,value:122}]);n.Test.isArrayEqual(e.getKeys().asArray(),[1,22]),e.remove(66),n.Test.isArrayEqual(e.getKeys().asArray(),[1,22])}),it("Removes key",function(){var e=new i.Dictionary([{key:1,value:101},{key:22,value:122},{key:33,value:1322}]);n.Test.isArrayEqual(e.getKeys().asArray(),[1,22,33]),e.remove(22),n.Test.isArrayEqual(e.getKeys().asArray(),[1,33]),e.remove(1),n.Test.isArrayEqual(e.getKeys().asArray(),[33]),e.remove(33),n.Test.isArrayEqual(e.getKeys().asArray(),[])})}e.run=function(){describe("FromJsObject",t),describe("AsReadOnly",r),describe("Copy",a),describe("Clear",u),describe("Get",o),describe("Set",s),describe("SetOrUpdate",c),describe("ContainsKey",l),describe("ContainsValue",f),describe("GetKeys",y),describe("GetValues",p),describe("Remove",h)}}(t.DictionaryUnitTest||(t.DictionaryUnitTest={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2),i=r(0);!function(e){function t(){var e=n.Enumerable.fromSource([{name:"Ivan",age:21,aliases:["isc","isc30","ivansanz"]},{name:"Antonio",age:31,aliases:["tony"]},{name:"Ana",age:17,aliases:["anita","ana no se"]},{name:"Pedro",age:8,aliases:["pica","piedra"]}]).where(function(e){return e.age<18}).select(function(e){return e.name+" ("+e.age+")"}).toArray();i.Test.isArrayEqual(e,["Ana (17)","Pedro (8)"])}function r(){var e=n.Enumerable.fromSource([{name:"Ivan",age:21,aliases:["isc","isc30","ivansanz"]},{name:"Antonio",age:31,aliases:["tony"]},{name:"Ana",age:17,aliases:["anita","ana no se"]},{name:"Pedro",age:8,aliases:["pica","piedra"]}]).selectMany(function(e){return e.aliases}).where(function(e){return e.length<=4}).toArray();i.Test.isArrayEqual(e,["isc","tony","pica"])}function a(){var e=n.Enumerable.fromSource([{name:"Ivan",age:21,aliases:["isc","isc30","ivansanz"]},{name:"Antonio",age:31,aliases:["tony"]},{name:"Ana",age:31,aliases:["anita","ana no se"]},{name:"Pedro",age:21,aliases:["pica","piedra"]}]).distinct(function(e){return e.age}).select(function(e){return e.age+5}).select(function(e){return e+2}).max();i.Test.isEqual(e,38)}function u(){var e=n.Enumerable.fromSource([{name:"Ivan",age:21,aliases:["isc","isc30","ivansanz"]},{name:"Antonio",age:38,aliases:["tony"]},{name:"Ana",age:18,aliases:["anita","ana no se"]},{name:"Pedro",age:9,aliases:["pica","piedra"]}]).where(function(e){return e.age<30}).orderBy(function(e){return e.age}).select(function(e){return e.name}).select(function(e){return e+"!"}).toArray();i.Test.isArrayEqual(e,["Pedro!","Ana!","Ivan!"])}e.run=function(){it("Where + Select",t),it("SelectMany + Where",r),it("DistinctBy + Select + Max",a),it("Where + OrderBy + Select",u)}}(t.IEnumerableIntegrationTest||(t.IEnumerableIntegrationTest={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=r(1);!function(e){function t(){it("Type is a Stack",function(){var e=new i.Stack([1,2,3]);n.Test.isTrue(e instanceof i.Stack)}),it("Returns a copy, not a reference",function(){var e=new i.Stack([1,2,3]),t=e.copy();n.Test.isArrayEqual(e.asArray(),t.asArray()),e.asArray().push(245),n.Test.isArrayNotEqual(e.asArray(),t.asArray()),n.Test.isArrayEqual(e.asArray(),[1,2,3,245]),n.Test.isArrayEqual(t.asArray(),[1,2,3])})}function r(){it("Does nothing on empty stack",function(){var e=new i.Stack;n.Test.isArrayEqual(e.asArray(),[]),e.clear(),n.Test.isArrayEqual(e.asArray(),[]),e.clear(),n.Test.isArrayEqual(e.asArray(),[])}),it("Stack is cleared",function(){var e=new i.Stack([1,2,3]);n.Test.isArrayEqual(e.asArray(),[1,2,3]),e.clear(),n.Test.isArrayEqual(e.asArray(),[])})}function a(){it("Returns the element in back of the stack",function(){var e=new i.Stack([1,2,3]),t=e.peek();n.Test.isEqual(t,3),n.Test.isArrayEqual(e.asArray(),[1,2,3]),e.pop(),t=e.peek(),n.Test.isEqual(t,2),n.Test.isArrayEqual(e.asArray(),[1,2]),t=e.peek(),n.Test.isEqual(t,2),n.Test.isArrayEqual(e.asArray(),[1,2]),e.pop(),t=e.peek(),n.Test.isEqual(t,1),n.Test.isArrayEqual(e.asArray(),[1])}),it("Returns undefined in empty stack",function(){var e=new i.Stack,t=e.peek();n.Test.isEqual(t,void 0),n.Test.isArrayEqual(e.asArray(),[])})}function u(){it("Adds element in back of the stack",function(){var e=new i.Stack;e.push(2),n.Test.isArrayEqual(e.asArray(),[2]),e.push(22),n.Test.isArrayEqual(e.asArray(),[2,22]),e.push(1),n.Test.isArrayEqual(e.asArray(),[2,22,1]),e.push(4),n.Test.isArrayEqual(e.asArray(),[2,22,1,4])})}function o(){it("Removes and returns the element in back of the stack",function(){var e=new i.Stack([1,2,3]),t=e.pop();n.Test.isEqual(t,3),n.Test.isArrayEqual(e.asArray(),[1,2]),t=e.pop(),n.Test.isEqual(t,2),n.Test.isArrayEqual(e.asArray(),[1]),t=e.pop(),n.Test.isEqual(t,1),n.Test.isArrayEqual(e.asArray(),[])}),it("Returns undefined in empty stack",function(){var e=new i.Stack,t=e.pop();n.Test.isEqual(t,void 0),n.Test.isArrayEqual(e.asArray(),[])})}e.run=function(){describe("Copy",t),describe("Clear",r),describe("Peek",a),describe("Push",u),describe("Pop",o)}}(t.StackUnitTest||(t.StackUnitTest={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=r(1);!function(e){function t(){it("Returns a reference, not a copy",function(){var e=[1,2,3],t=new i.List(e);n.Test.isArrayEqual(t.asArray(),e),e.push(245),n.Test.isArrayEqual(t.asArray(),e)})}function r(){it("Same object but different interface",function(){var e=new i.List(["hi","yess"]);n.Test.isEqual(e,e.asReadOnly())})}function a(){it("Type is a List",function(){var e=new i.List([1,2,3]);n.Test.isTrue(e instanceof i.List)}),it("Returns a copy, not a reference",function(){var e=new i.List([1,2,3]),t=e.copy();n.Test.isArrayEqual(e.asArray(),t.asArray()),e.asArray().push(245),n.Test.isArrayNotEqual(e.asArray(),t.asArray()),n.Test.isArrayEqual(e.asArray(),[1,2,3,245]),n.Test.isArrayEqual(t.asArray(),[1,2,3])})}function u(){it("Does nothing on empty list",function(){var e=new i.List;n.Test.isArrayEqual(e.asArray(),[]),e.clear(),n.Test.isArrayEqual(e.asArray(),[]),e.clear(),n.Test.isArrayEqual(e.asArray(),[])}),it("List is cleared",function(){var e=new i.List([1,2,3]);n.Test.isArrayEqual(e.asArray(),[1,2,3]),e.clear(),n.Test.isArrayEqual(e.asArray(),[])})}function o(){it("Value is correct",function(){var e=new i.List([1,2,3]);n.Test.isEqual(e.get(0),1),n.Test.isEqual(e.get(1),2),n.Test.isEqual(e.get(2),3)}),it("Undefined if invalid index",function(){var e=new i.List([1,2,3]);n.Test.isEqual(e.get(-999),void 0),n.Test.isEqual(e.get(-1),void 0),n.Test.isEqual(e.get(3),void 0),n.Test.isEqual(e.get(999),void 0)})}function s(){it("Adds element in back of the list",function(){var e=new i.List;e.push(2),n.Test.isArrayEqual(e.asArray(),[2]),e.push(22),n.Test.isArrayEqual(e.asArray(),[2,22]),e.push(1),n.Test.isArrayEqual(e.asArray(),[2,22,1]),e.push(4),n.Test.isArrayEqual(e.asArray(),[2,22,1,4])})}function c(){it("Adds element in front of the list",function(){var e=new i.List;e.pushFront(2),n.Test.isArrayEqual(e.asArray(),[2]),e.pushFront(22),n.Test.isArrayEqual(e.asArray(),[22,2]),e.pushFront(1),n.Test.isArrayEqual(e.asArray(),[1,22,2]),e.pushFront(4),n.Test.isArrayEqual(e.asArray(),[4,1,22,2])})}function l(){it("Empty range doesn't modify the original (array)",function(){var e=new i.List([1,2,3]);n.Test.isEqual(e.pushRange([]),3),n.Test.isArrayEqual(e.asArray(),[1,2,3])}),it("Empty range doesn't modify the original (IQueryable)",function(){var e=new i.List([1,2,3]);n.Test.isEqual(e.pushRange(new i.List),3),n.Test.isArrayEqual(e.asArray(),[1,2,3])}),it("Value is correct (array)",function(){var e=new i.List([1,2,3]);n.Test.isEqual(e.pushRange([22]),4),n.Test.isArrayEqual(e.asArray(),[1,2,3,22]),n.Test.isEqual(e.pushRange([24,67]),6),n.Test.isArrayEqual(e.asArray(),[1,2,3,22,24,67])}),it("Value is correct (IQueryable)",function(){var e=new i.List([1,2,3]);n.Test.isEqual(e.pushRange(new i.List([22])),4),n.Test.isArrayEqual(e.asArray(),[1,2,3,22]),n.Test.isEqual(e.pushRange(new i.List([24,67])),6),n.Test.isArrayEqual(e.asArray(),[1,2,3,22,24,67])})}function f(){it("Removes and returns the element in back of the list",function(){var e=new i.List([1,2,3]),t=e.pop();n.Test.isEqual(t,3),n.Test.isArrayEqual(e.asArray(),[1,2]),t=e.pop(),n.Test.isEqual(t,2),n.Test.isArrayEqual(e.asArray(),[1]),t=e.pop(),n.Test.isEqual(t,1),n.Test.isArrayEqual(e.asArray(),[])}),it("Returns undefined in empty list",function(){var e=new i.List,t=e.pop();n.Test.isEqual(t,void 0),n.Test.isArrayEqual(e.asArray(),[])})}function y(){it("Removes and returns the element in back of the list",function(){var e=new i.List([1,2,3]),t=e.popFront();n.Test.isEqual(t,1),n.Test.isArrayEqual(e.asArray(),[2,3]),t=e.popFront(),n.Test.isEqual(t,2),n.Test.isArrayEqual(e.asArray(),[3]),t=e.popFront(),n.Test.isEqual(t,3),n.Test.isArrayEqual(e.asArray(),[])}),it("Returns undefined in empty list",function(){var e=new i.List,t=e.popFront();n.Test.isEqual(t,void 0),n.Test.isArrayEqual(e.asArray(),[])})}function p(){it("Does nothing on empty list",function(){var e=new i.List;e.remove(6),e.remove(-6),n.Test.isArrayEqual(e.asArray(),[])}),it("Remove single element",function(){var e=new i.List([2,3,4,5]);e.remove(3),n.Test.isArrayEqual(e.asArray(),[2,4,5]),e.remove(6),n.Test.isArrayEqual(e.asArray(),[2,4,5]),e.remove(4),n.Test.isArrayEqual(e.asArray(),[2,5]),e.remove(2),n.Test.isArrayEqual(e.asArray(),[5]),e.remove(5),n.Test.isArrayEqual(e.asArray(),[])}),it("Remove element multiple times",function(){var e=new i.List([1,1,2,3,2,5,6,6]);e.remove(1),n.Test.isArrayEqual(e.asArray(),[2,3,2,5,6,6]),e.remove(2),n.Test.isArrayEqual(e.asArray(),[3,5,6,6]),e.remove(6),n.Test.isArrayEqual(e.asArray(),[3,5])})}function h(){it("Exception if negative index",function(){var e=new i.List([6,6,6]);n.Test.throwsException(function(){return e.removeAt(-1)}),n.Test.throwsException(function(){return e.removeAt(-50)}),n.Test.throwsException(function(){return e.removeAt(-9999)})}),it("Exception if invalid index",function(){var e=new i.List([6,6,6]);n.Test.throwsException(function(){return e.removeAt(3)}),n.Test.throwsException(function(){return e.removeAt(50)}),n.Test.throwsException(function(){return e.removeAt(9999)})}),it("Deletes element by index",function(){var e=new i.List([2,3,4,5]);e.removeAt(3),n.Test.isArrayEqual(e.asArray(),[2,3,4]),e.removeAt(0),n.Test.isArrayEqual(e.asArray(),[3,4]),e.removeAt(1),n.Test.isArrayEqual(e.asArray(),[3]),e.removeAt(0),n.Test.isArrayEqual(e.asArray(),[])})}function E(){it("Exception if negative index",function(){var e=new i.List([6,6,6]);n.Test.throwsException(function(){return e.set(-1,666)}),n.Test.throwsException(function(){return e.set(-50,666)}),n.Test.throwsException(function(){return e.set(-9999,666)})}),it("Initializes list if empty",function(){var e=new i.List;e.set(0,33),n.Test.isArrayEqual(e.asArray(),[33])}),it("Sets the correct index",function(){var e=new i.List([2,4,6,8,7]);e.set(0,33),n.Test.isArrayEqual(e.asArray(),[33,4,6,8,7]),e.set(3,22),n.Test.isArrayEqual(e.asArray(),[33,4,6,22,7])}),it("Resizes list if necessary",function(){var e=new i.List([2,4,6,8,7]);e.set(7,33),n.Test.isArrayEqual(e.asArray(),[2,4,6,8,7,void 0,void 0,33])})}function v(){it("-1 in empty list",function(){var e=new i.List;n.Test.isEqual(e.indexOf(666),-1),n.Test.isEqual(e.indexOf(0),-1),n.Test.isEqual(e.indexOf(-666),-1)}),it("-1 if element not found",function(){var e=new i.List([1,2,3]);n.Test.isEqual(e.indexOf(-999),-1),n.Test.isEqual(e.indexOf(-1),-1),n.Test.isEqual(e.indexOf(4),-1),n.Test.isEqual(e.indexOf(999),-1)}),it("Value is correct",function(){var e=new i.List([1,2,3]);n.Test.isEqual(e.indexOf(2),1),n.Test.isEqual(e.indexOf(1),0),n.Test.isEqual(e.indexOf(3),2)})}function d(){it("Throws exception if index < 0",function(){var e=new i.List([1,2,3]);n.Test.throwsException(function(){return e.insert(-3,55)})}),it("Throws exception if index > length",function(){var e=new i.List([1,2,3]);n.Test.throwsException(function(){return e.insert(4,55)})}),it("Initializes empty list",function(){var e=new i.List;e.insert(0,4),n.Test.isArrayEqual(e.asArray(),[4])}),it("Moves other elements to fit the new one",function(){var e=new i.List([1,2,3]);e.insert(1,55),n.Test.isArrayEqual(e.asArray(),[1,55,2,3])})}e.run=function(){describe("AsArray",t),describe("AsReadOnly",r),describe("Copy",a),describe("Clear",u),describe("Get",o),describe("Push",s),describe("PushFront",c),describe("PushRange",l),describe("Pop",f),describe("PopFront",y),describe("Remove",p),describe("RemoveAt",h),describe("Set",E),describe("IndexOf",v),describe("Insert",d)}}(t.ListUnitTest||(t.ListUnitTest={}))},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(2),u=r(1),o=r(3),s=r(0);!function(e){var t=function(e){function t(t){void 0===t&&(t=[]);var r=e.call(this)||this;return r.source=t,r}return i(t,e),t.prototype.copy=function(){return new t(this.toArray())},t.prototype.toArray=function(){return[].concat(this.source)},t.prototype.asEnumerable=function(){return new a.ArrayEnumerable(this.source)},t}(u.EnumerableCollection);function r(e,r){describe(e+" (Enumerable)",function(){return r(function(e){return new a.Enumerable(new o.ArrayIterator(e))})}),describe(e+" (ConditionalEnumerable)",function(){return r(function(e){return new a.ConditionalEnumerable(a.Enumerable.fromSource(e),function(e){return!0})})}),describe(e+" (ConcatEnumerable)",function(){return r(function(e){return e.length>1?new a.ConcatEnumerable(a.Enumerable.fromSource([e[0]]),a.Enumerable.fromSource(e.slice(1))):new a.ConcatEnumerable(a.Enumerable.fromSource(e),a.Enumerable.fromSource([]))})});var n=0;describe(e+" (UniqueEnumerable)",function(){return r(function(e){return new a.UniqueEnumerable(a.Enumerable.fromSource(e),function(e){return n++})})}),describe(e+" (RangeEnumerable)",function(){return r(function(e){return new a.RangeEnumerable(a.Enumerable.fromSource(e),void 0,void 0)})}),describe(e+" (TransformEnumerable)",function(){return r(function(e){return new a.TransformEnumerable(a.Enumerable.fromSource(e),function(e){return e})})}),describe(e+" (ReverseEnumerable)",function(){return r(function(e){return new a.ReverseEnumerable(new a.ReverseEnumerable(a.Enumerable.fromSource(e)))})}),describe(e+" (SkipWhileEnumerable)",function(){return r(function(e){return new a.SkipWhileEnumerable(a.Enumerable.fromSource(e),function(e){return!1})})}),describe(e+" (TakeWhileEnumerable)",function(){return r(function(e){return new a.TakeWhileEnumerable(a.Enumerable.fromSource(e),function(e){return!0})})}),describe(e+" (DefaultIfEmptyEnumerable)",function(){return r(function(e){return new a.DefaultIfEmptyEnumerable(a.Enumerable.fromSource(e)).where(function(e){return void 0!==e})})}),describe(e+" (ArrayEnumerable)",function(){return r(function(e){return new a.ArrayEnumerable(e)})}),describe(e+" (EnumerableCollection)",function(){return r(function(e){return new t(e)})}),describe(e+" (List)",function(){return r(function(e){return new u.List(e)})}),describe(e+" (Stack)",function(){return r(function(e){return new u.Stack(e)})}),n=0,describe(e+" (Dictionary Value)",function(){return r(function(e){return u.Dictionary.fromArray(e,function(e){return n++},function(e){return e}).select(function(e){return e.value})})})}function n(e){it("Empty collection",function(){s.Test.isArrayEqual(e([]).toArray(),[])});var t=[1,2,3,4],r=e([1,2,3,4]).toArray();it("Content is correct",function(){s.Test.isArrayEqual(t,r)}),it("Returns a copy, not a reference",function(){t.push(5),s.Test.isArrayEqual([1,2,3,4],r)}),it("Content is correct (string)",function(){var t=["asd","asdaa"],r=e(t);s.Test.isArrayEqual(r.toArray(),t)})}function c(e){it("Returns List",function(){var t=e([1,2,3]).toList();s.Test.isTrue(t instanceof u.List),s.Test.isArrayEqual(t.toArray(),[1,2,3])})}function l(e){it("Returns Dictionary",function(){var t=e([1,2,3]).toDictionary(function(e){return e},function(e){return"wow"+e});s.Test.isTrue(t instanceof u.Dictionary)})}function f(e){it("Exception if empty",function(){var t=e([]);s.Test.throwsException(function(){return t.aggregate(function(e,t){return t})})}),it("No exception if empty but with default value",function(){var t=e([]);s.Test.isEqual(t.aggregate(function(e,t){return t},-666),-666)}),it("No initial value",function(){var t=e(["a","b","a","a"]);s.Test.isEqual(t.aggregate(function(e,t){return"b"===e?e:t}),"b"),s.Test.isEqual(t.aggregate(function(e,t){return void 0!==e?t+e:t}),"aaba")}),it("Custom initial value",function(){var t=e(["a","b","a","a"]);s.Test.isEqual(t.aggregate(function(e,t){return void 0!==e?t+e:t},"xd"),"aabaxd")}),it("Custom return type",function(){var t=e(["a","b","a","a"]);s.Test.isTrue(t.aggregate(function(e,t){return e||"b"===t},!1)),s.Test.isTrue(t.aggregate(function(e,t){return e||"a"===t},!1)),s.Test.isFalse(t.aggregate(function(e,t){return e||"x"===t},!1)),s.Test.isTrue(t.aggregate(function(e,t){return e||"x"===t},!0))})}function y(e){it("True if empty",function(){var t=e([]);s.Test.isTrue(t.all(function(e){return!0})),s.Test.isTrue(t.all(function(e){return!1}))}),it("Single element",function(){var t=e(["lol"]);s.Test.isTrue(t.all(function(e){return"l"===e[0]})),s.Test.isFalse(t.all(function(e){return"X"===e[0]}))}),it("Multiple elements",function(){var t=e(["a","av","abc","axd"]);s.Test.isTrue(t.all(function(e){return e.length>0})),s.Test.isTrue(t.all(function(e){return"a"===e[0]})),s.Test.isTrue(t.all(function(e){return e.length<4})),s.Test.isFalse(t.all(function(e){return e.length>1})),s.Test.isFalse(t.all(function(e){return"v"===e[1]})),s.Test.isFalse(t.all(function(e){return e.length<2}))})}function p(e){it("False if empty",function(){var t=e([]);s.Test.isFalse(t.any()),s.Test.isFalse(t.any(function(e){return!0})),s.Test.isFalse(t.any(function(e){return!1}))}),it("True if single element",function(){var t=e(["lol"]);s.Test.isTrue(t.any())}),it("Predicate in single element",function(){var t=e(["lol"]);s.Test.isTrue(t.any(function(e){return"o"===e[1]})),s.Test.isFalse(t.any(function(e){return"isc"===e}))}),it("Predicate in multiple elements",function(){var t=e(["a","av","abc","x"]);s.Test.isTrue(t.any(function(e){return e.length>2})),s.Test.isTrue(t.any(function(e){return"a"===e[0]})),s.Test.isTrue(t.any(function(e){return 1===e.length})),s.Test.isFalse(t.any(function(e){return"b"===e[0]})),s.Test.isFalse(t.any(function(e){return e.length>5})),s.Test.isFalse(t.any(function(e){return 0===e.length}))}),it("Stop as soon as the result can be determined",function(){var t=e([function(){return 3},function(){return 4},function(){throw new Error("stop")},function(){return 5}]);s.Test.isTrue(t.any(function(e){return 3===e()})),s.Test.isTrue(t.any(function(e){return 4===e()})),s.Test.throwsException(function(){return t.any(function(e){return 5===e()})})})}function h(e){it("Exception if empty",function(){var t=e([]);s.Test.throwsException(function(){return t.average(function(e){return e})})}),it("Single element",function(){var t=e([2]);s.Test.isEqual(t.average(function(e){return e}),2)}),it("Multiple elements",function(){var t=e([3,4,-2,79,1]);s.Test.isEqual(t.average(function(e){return e}),17)}),it("Selector in multiple elements",function(){var t=e(["112","452","465"]);s.Test.isEqual(t.average(function(e){return parseInt(e[0])}),3),s.Test.isEqual(t.average(function(e){return parseInt(e[1])}),4),s.Test.isEqual(t.average(function(e){return parseInt(e)}),343)})}function E(e){it("Empty collections",function(){var t=e([]);s.Test.isArrayEqual(t.concat(t).toArray(),[]),s.Test.isArrayEqual(t.concat(t,t).toArray(),[]),s.Test.isArrayEqual(t.concat(t,t,t).toArray(),[])}),it("Exception if out of bounds",function(){var t=e(a.Enumerable.range(1,2).toArray()),r=e(a.Enumerable.range(3,2).toArray()),n=e(a.Enumerable.range(5,2).toArray()),i=t.concat(r);i.next(),s.Test.isEqual(i.value(),1),i.next(),s.Test.isEqual(i.value(),2),i.next(),s.Test.isEqual(i.value(),3),i.next(),s.Test.isEqual(i.value(),4),i.next(),s.Test.throwsException(function(){i.value()}),(i=t.concat(r,n)).next(),s.Test.isEqual(i.value(),1),i.next(),s.Test.isEqual(i.value(),2),i.next(),s.Test.isEqual(i.value(),3),i.next(),s.Test.isEqual(i.value(),4),i.next(),s.Test.isEqual(i.value(),5),i.next(),s.Test.isEqual(i.value(),6),i.next(),s.Test.throwsException(function(){i.value()})}),it("2 collections",function(){var t=e(a.Enumerable.range(1,3).toArray()),r=e(a.Enumerable.range(4,3).toArray());s.Test.isArrayEqual(t.concat(r).toArray(),[1,2,3,4,5,6])}),it("More than 2 collections",function(){var t=e(a.Enumerable.range(1,2).toArray()),r=e(a.Enumerable.range(3,2).toArray()),n=e(a.Enumerable.range(5,2).toArray());s.Test.isArrayEqual(t.concat(r,n).toArray(),[1,2,3,4,5,6])}),it("Mixed with Empty collections",function(){var t=e([]),r=e(a.Enumerable.range(1,3).toArray());s.Test.isArrayEqual(r.concat(t).toArray(),[1,2,3]),s.Test.isArrayEqual(t.concat(r).toArray(),[1,2,3]),s.Test.isArrayEqual(t.concat(r,t).toArray(),[1,2,3]),s.Test.isArrayEqual(r.concat(r,t).toArray(),[1,2,3,1,2,3]),s.Test.isArrayEqual(r.concat(t,r).toArray(),[1,2,3,1,2,3])})}function v(e){it("Empty returns false",function(){var t=e([]);s.Test.isFalse(t.contains(999)),s.Test.isFalse(t.contains(0)),s.Test.isFalse(t.contains(-999))}),it("Value is correct",function(){var t=e([1,2,4]);s.Test.isTrue(t.contains(1)),s.Test.isTrue(t.contains(2)),s.Test.isTrue(t.contains(4)),s.Test.isFalse(t.contains(3)),s.Test.isFalse(t.contains(7))})}function d(e){it("Empty returns Zero (no predicate)",function(){var t=e([]);s.Test.isEqual(t.count(),0)}),it("Empty returns Zero (with predicate)",function(){var t=e([]);s.Test.isEqual(t.count(function(e){return 13===e}),0)}),it("Value is correct (no predicate)",function(){var t=e([1]);s.Test.isEqual(t.count(),1),t=e([1,2,3]),s.Test.isEqual(t.count(),3),t=e(a.Enumerable.range(1,66).toArray()),s.Test.isEqual(t.count(),66)}),it("Value is correct (with predicate)",function(){var t=e([1]);s.Test.isEqual(t.count(function(e){return e<4}),1),s.Test.isEqual(t.count(function(e){return e>4}),0),t=e([1,2,3]),s.Test.isEqual(t.count(function(e){return e%2!=0}),2),s.Test.isEqual(t.count(function(e){return e>0}),3),s.Test.isEqual(t.count(function(e){return e<=1}),1),t=e(a.Enumerable.range(1,66).toArray()),s.Test.isEqual(t.count(function(e){return e<1}),0),s.Test.isEqual(t.count(function(e){return e>20}),46),s.Test.isEqual(t.count(function(e){return e<100}),66)})}function T(e){it("Return normal array if not empty (no default value)",function(){var t=e([1,2,3]);s.Test.isArrayEqual(t.defaultIfEmpty().toArray(),[1,2,3])}),it("Return normal array if not empty (with default value)",function(){var t=e([1,2,3]);s.Test.isArrayEqual(t.defaultIfEmpty(666).toArray(),[1,2,3])}),it("Return single element (undefined) array if empty (no default value)",function(){var t=e([]);s.Test.isArrayEqual(t.defaultIfEmpty().toArray(),[void 0])}),it("Return single element (undefined) array if empty (with default value)",function(){var t=e([]);s.Test.isArrayEqual(t.defaultIfEmpty(666).toArray(),[666])}),it("Multiple iterations (no default value)",function(){var t=e([]).defaultIfEmpty();s.Test.isArrayEqual(t.toArray(),[void 0]),s.Test.isArrayEqual(t.toArray(),[void 0]),s.Test.isArrayEqual(t.toArray(),[void 0])}),it("Multiple iterations (with default value)",function(){var t=e([]).defaultIfEmpty(666);s.Test.isArrayEqual(t.toArray(),[666]),s.Test.isArrayEqual(t.toArray(),[666]),s.Test.isArrayEqual(t.toArray(),[666])}),it("Using iterators (no default value)",function(){var t=e([]).defaultIfEmpty();s.Test.throwsException(function(){return t.value()}),s.Test.isTrue(t.next()),s.Test.isEqual(t.value(),void 0),s.Test.isEqual(t.value(),void 0),s.Test.isFalse(t.next())}),it("Using iterators (with default value)",function(){var t=e([]).defaultIfEmpty(666);s.Test.throwsException(function(){return t.value()}),s.Test.isTrue(t.next()),s.Test.isEqual(t.value(),666),s.Test.isEqual(t.value(),666),s.Test.isFalse(t.next())})}function m(e){it("Return empty if empty (no predicate)",function(){var t=e([]);s.Test.isArrayEqual(t.distinct(function(e){return e}).toArray(),[])}),it("Value is correct (no predicate)",function(){var t=e([-5,6,2,6,99,0,-5,2,7,2,0]);s.Test.isArrayEqual(t.distinct(function(e){return e}).toArray(),[-5,6,2,99,0,7])}),it("Return empty if empty (with predicate)",function(){var t=e([]);s.Test.isArrayEqual(t.distinct(function(e){return e}).toArray(),[])}),it("Value is correct (with predicate)",function(){var t=e(["a","b","aba","ce","wea","baba","era","eaa"]);s.Test.isArrayEqual(t.distinct(function(e){return e[0]}).toArray(),["a","b","ce","wea","era"])})}function A(e){it("Return empty if empty source (iterator)",function(){var t=e([]),r=new a.Enumerable(t.orderBy(function(e){return e}));s.Test.isArrayEqual(r.toArray(),[])}),it("Simple order (iterator)",function(){var t=e([2,6,3,7,1]),r=new a.Enumerable(t.orderBy(function(e){return e}));s.Test.isArrayEqual(r.toArray(),[1,2,3,6,7])}),it("Simple order (custom comparer) (iterator)",function(){var t=e([2,6,3,7,1]),r=new a.Enumerable(t.orderBy(function(e){return e},function(e,t){return e>t?-1:1}));s.Test.isArrayEqual(r.toArray(),[7,6,3,2,1])}),it("Simple order (string) (iterator)",function(){var t=e(["Ivan","Uxue","Manolo","Antonio"]),r=new a.Enumerable(t.orderBy(function(e){return e[1]}));s.Test.isArrayEqual(r.toArray(),["Manolo","Antonio","Ivan","Uxue"])}),it("Return empty if empty source",function(){var t=e([]).orderBy(function(e){return e});s.Test.isArrayEqual(t.toArray(),[])}),it("Simple order",function(){var t=e([2,6,3,7,1]).orderBy(function(e){return e});s.Test.isArrayEqual(t.toArray(),[1,2,3,6,7])}),it("Simple order (custom comparer)",function(){var t=e([2,6,3,7,1]).orderBy(function(e){return e},function(e,t){return e>t?-1:1});s.Test.isArrayEqual(t.toArray(),[7,6,3,2,1])}),it("Simple order (string)",function(){var t=e(["Ivan","Uxue","Manolo","Antonio"]).orderBy(function(e){return e[1]});s.Test.isArrayEqual(t.toArray(),["Manolo","Antonio","Ivan","Uxue"])}),it("Return empty if empty source (double)",function(){var t=e([]).orderBy(function(e){return e}).orderBy(function(e){return e});s.Test.isArrayEqual(t.toArray(),[])}),it("Simple order (double)",function(){var t=e([2,6,3,7,1]).orderBy(function(e){return e}).orderBy(function(e){return e});s.Test.isArrayEqual(t.toArray(),[1,2,3,6,7])}),it("Simple order (custom comparer) (double)",function(){var t=e([2,6,3,7,1]).orderBy(function(e){return e}).orderBy(function(e){return e},function(e,t){return e>t?-1:1});s.Test.isArrayEqual(t.toArray(),[7,6,3,2,1])}),it("Simple order (string) (double)",function(){var t=e(["Ivan","Uxue","Manolo","Antonio"]).orderBy(function(e){return e[1]}).orderBy(function(e){return e[1]});s.Test.isArrayEqual(t.toArray(),["Manolo","Antonio","Ivan","Uxue"])})}function q(e){it("Return empty if empty source (iterator)",function(){var t=e([]),r=new a.Enumerable(t.orderByDescending(function(e){return e}));s.Test.isArrayEqual(r.toArray(),[])}),it("Simple order (iterator)",function(){var t=e([2,6,3,7,1]),r=new a.Enumerable(t.orderByDescending(function(e){return e}));s.Test.isArrayEqual(r.toArray(),[7,6,3,2,1])}),it("Simple order (string) (iterator)",function(){var t=e(["Ivan","Uxue","Manolo","Antonio"]),r=new a.Enumerable(t.orderByDescending(function(e){return e[1]}));s.Test.isArrayEqual(r.toArray(),["Uxue","Ivan","Antonio","Manolo"])}),it("Return empty if empty source",function(){var t=e([]).orderByDescending(function(e){return e});s.Test.isArrayEqual(t.toArray(),[])}),it("Simple order",function(){var t=e([2,6,3,7,1]).orderByDescending(function(e){return e});s.Test.isArrayEqual(t.toArray(),[7,6,3,2,1])}),it("Simple order (string)",function(){var t=e(["Ivan","Uxue","Manolo","Antonio"]).orderByDescending(function(e){return e[1]});s.Test.isArrayEqual(t.toArray(),["Uxue","Ivan","Antonio","Manolo"])}),it("Return empty if empty source (double)",function(){var t=e([]).orderByDescending(function(e){return e}).orderByDescending(function(e){return e});s.Test.isArrayEqual(t.toArray(),[])}),it("Simple order (double)",function(){var t=e([2,6,3,7,1]).orderByDescending(function(e){return e}).orderByDescending(function(e){return e});s.Test.isArrayEqual(t.toArray(),[7,6,3,2,1])}),it("Simple order (double) (string)",function(){var t=e(["Ivan","Uxue","Manolo","Antonio"]).orderByDescending(function(e){return e}).orderByDescending(function(e){return e[1]});s.Test.isArrayEqual(t.toArray(),["Uxue","Ivan","Antonio","Manolo"])})}function b(e){it("Value is correct ",function(){var t=e([1,2,3,4]).reverse();s.Test.isArrayEqual(t.toArray(),[4,3,2,1])}),it("Value is correct (iterator)",function(){var t=new a.Enumerable(e([1,2,3,4]).reverse());s.Test.isArrayEqual(t.toArray(),[4,3,2,1])}),it("Double reverse does nothing",function(){var t=e([1,2,3,4]).reverse().reverse();s.Test.isArrayEqual(t.toArray(),[1,2,3,4]),t=new a.Enumerable(e([1,2,3,4]).reverse()).reverse(),s.Test.isArrayEqual(t.toArray(),[1,2,3,4])}),it("Double reverse does nothing (iterator)",function(){var t=new a.Enumerable(e([1,2,3,4]).reverse().reverse());s.Test.isArrayEqual(t.toArray(),[1,2,3,4]),t=new a.Enumerable(new a.Enumerable(e([1,2,3,4]).reverse()).reverse()),s.Test.isArrayEqual(t.toArray(),[1,2,3,4])})}function w(e){it("Negative index throws exception",function(){var t=e([1,2,3,4]);s.Test.throwsException(function(){return t.elementAt(-1)}),s.Test.throwsException(function(){return t.elementAt(-666)})}),it("Out of bounds index throws exception",function(){var t=e([1,2]);s.Test.throwsException(function(){return t.elementAt(2)}),s.Test.throwsException(function(){return t.elementAt(666)})}),it("Value is correct",function(){var t=e([1,2,3,4]);s.Test.throwsException(function(){return t.elementAt(-1)}),s.Test.isEqual(t.elementAt(0),1),s.Test.isEqual(t.elementAt(1),2),s.Test.isEqual(t.elementAt(2),3),s.Test.isEqual(t.elementAt(3),4),s.Test.throwsException(function(){return t.elementAt(4)})})}function g(e){it("Negative index throws exception",function(){var t=e([1,2,3,4]);s.Test.throwsException(function(){return t.elementAtOrDefault(-1)}),s.Test.throwsException(function(){return t.elementAtOrDefault(-666)})}),it("Out of bounds index returns undefined",function(){var t=e([1,2]);s.Test.isEqual(t.elementAtOrDefault(2),void 0),s.Test.isEqual(t.elementAtOrDefault(666),void 0)}),it("Value is correct",function(){var t=e([1,2,3,4]);s.Test.throwsException(function(){return t.elementAtOrDefault(-1)}),s.Test.isEqual(t.elementAtOrDefault(0),1),s.Test.isEqual(t.elementAtOrDefault(1),2),s.Test.isEqual(t.elementAtOrDefault(2),3),s.Test.isEqual(t.elementAtOrDefault(3),4),s.Test.isEqual(t.elementAtOrDefault(4),void 0)})}function x(e){it("Value is correct (empty)",function(){var t=e([1,2,3,4]),r=e([]);s.Test.isArrayEqual(t.except(r).toArray(),[1,2,3,4]),t=e([]),s.Test.isArrayEqual(t.except(r).toArray(),[])}),it("Value is correct",function(){var t=e([1,2,3,4]),r=e([2,5,1,7]);s.Test.isArrayEqual(t.except(r).toArray(),[3,4]),r=e([3,6,88]),s.Test.isArrayEqual(t.except(r).toArray(),[1,2,4])})}function _(e){it("Exception if empty",function(){var t=e([]);s.Test.throwsException(function(){return t.first()})}),it("Exception if no element found",function(){var t=e([-2,4,65,42,32,1,36,7,2]);s.Test.throwsException(function(){return t.first(function(e){return 11811===e})})}),it("Value is correct",function(){var t=e([-2,4,65,42,32,1,36,7,2]);s.Test.isEqual(t.first(),-2),s.Test.isEqual(t.first(function(e){return e>5}),65),s.Test.isEqual(t.first(function(e){return e%6==0}),42)})}function k(e){it("Undefined if empty",function(){var t=e([]);s.Test.isEqual(t.firstOrDefault(),void 0)}),it("Undefined if no element found",function(){var t=e([-2,4,65,42,32,1,36,7,2]);s.Test.isEqual(t.firstOrDefault(function(e){return 11811===e}),void 0)}),it("Value is correct",function(){var t=e([-2,4,65,42,32,1,36,7,2]);s.Test.isEqual(t.firstOrDefault(),-2),s.Test.isEqual(t.firstOrDefault(function(e){return e>5}),65),s.Test.isEqual(t.firstOrDefault(function(e){return e%6==0}),42)})}function D(e){it("Exception if empty",function(){var t=e([]);s.Test.throwsException(function(){return t.last()})}),it("Exception if no element found",function(){var t=e([-2,4,65,42,32,1,36,7,2]);s.Test.throwsException(function(){return t.last(function(e){return 11811===e})})}),it("Value is correct",function(){var t=e([-2,4,65,42,32,1,36,7,2]);s.Test.isEqual(t.last(),2),s.Test.isEqual(t.last(function(e){return e>5}),7),s.Test.isEqual(t.last(function(e){return e%6==0}),36)})}function O(e){it("Exception if empty",function(){var t=e([]);s.Test.isEqual(t.lastOrDefault(),void 0)}),it("Exception if no element found",function(){var t=e([-2,4,65,42,32,1,36,7,2]);s.Test.isEqual(t.lastOrDefault(function(e){return 11811===e}),void 0)}),it("Value is correct",function(){var t=e([-2,4,65,42,32,1,36,7,2]);s.Test.isEqual(t.lastOrDefault(),2),s.Test.isEqual(t.lastOrDefault(function(e){return e>5}),7),s.Test.isEqual(t.lastOrDefault(function(e){return e%6==0}),36)})}function S(e){it("All elements are iterated",function(){var t=e([1,2,3]),r=[];t.forEach(function(e){r.push(e)}),s.Test.isArrayEqual(t.toArray(),r)}),it("Primitive type inmutability",function(){var t=e([1,2,3]),r=t.toArray();t.forEach(function(e){1}),s.Test.isArrayEqual(t.toArray(),r)}),it("Using indices",function(){var t=[];e([1,2,3]).forEach(function(e,r){t.push(e+r)}),s.Test.isArrayEqual(t,[1,3,5])})}function V(e){it("Exception if empty",function(){var t=e([]);s.Test.throwsException(function(){return t.max()})}),it("Value is correct (no selector)",function(){var t=e([2]);s.Test.isEqual(t.max(),2),t=e([3,4,-8,77,1]),s.Test.isEqual(t.max(),77)}),it("Value is correct (with selector)",function(){var t=e(["hello","ivan","how","are","you"]);s.Test.isEqual(t.max(),"you"),s.Test.isEqual(t.max(function(e){return e[0]}),"y"),s.Test.isEqual(t.max(function(e){return e[1]}),"v")})}function F(e){it("Exception if empty",function(){var t=e([]);s.Test.throwsException(function(){return t.min()})}),it("Value is correct (no selector)",function(){var t=e([2]);s.Test.isEqual(t.min(),2),t=e([3,4,-8,77,1]),s.Test.isEqual(t.min(),-8)}),it("Value is correct (with selector)",function(){var t=e(["hello","ivan","how","are","you"]);s.Test.isEqual(t.min(),"are"),s.Test.isEqual(t.min(function(e){return e[0]}),"a"),s.Test.isEqual(t.min(function(e){return e[1]}),"e")})}function I(e){it("Empty if empty",function(){var t=e([]).select(function(e){return e+1});s.Test.isArrayEqual(t.toArray(),[])}),it("Value is correct",function(){var t=e([1,2,3]).select(function(e){return e+1});s.Test.isArrayEqual(t.toArray(),[2,3,4])}),it("Value is correct (string)",function(){var t=e(["pepin","sanz","macheta"]).select(function(e){return e.length});s.Test.isArrayEqual(t.toArray(),[5,4,7])})}e.run=function(){r("ToArray",n),r("ToList",c),r("ToDictionary",l),r("Aggregate",f),r("All",y),r("Any",p),r("Average",h),r("Concat",E),r("Contains",v),r("Count",d),r("DefaultIfEmpty",T),r("Distinct",m),r("ElementAt",w),r("ElementAtOrDefault",g),r("Except",x),r("First",_),r("FirstOrDefault",k),r("ForEach",S),r("Last",D),r("LastOrDefault",O),r("Max",V),r("Min",F),r("OrderBy",A),r("OrderByDescending",q),r("Reverse",b),r("Select",I),r("SelectMany",C),r("SequenceEqual",R),r("Single",U),r("SingleOrDefault",L),r("Skip",M),r("Skip + Take",P),r("SkipWhile",j),r("Sum",K),r("Take",W),r("TakeWhile",N),r("ThenBy",Q),r("ThenByDescending",z),r("Union",J),r("Where",G),r("GroupBy",H)};var B=function(){return function(e){this.numbers=e}}();function C(e){it("Empty returns empty",function(){var t=e([]);s.Test.isArrayEqual(t.selectMany(function(e){return e.numbers}).toArray(),[])}),it("Single element",function(){var t=e([new B(e([1,2,3]))]);s.Test.isArrayEqual(t.selectMany(function(e){return e.numbers}).toArray(),[1,2,3])}),it("Multiple elements",function(){var t=e([new B(e([1,2,3])),new B(e([4,5])),new B(e([])),new B(e([6])),new B(e([7,8]))]);s.Test.isArrayEqual(t.selectMany(function(e){return e.numbers}).toArray(),[1,2,3,4,5,6,7,8])})}function R(e){var t=function(){return function(e,t,r){this.firstName=e,this.lastName=t,this.age=r}}();it("Both empty return true",function(){var t=e([]),r=e([]);s.Test.isTrue(t.sequenceEqual(r)),s.Test.isTrue(t.sequenceEqual(r.toArray()))}),it("Different count return false (number)",function(){var t=e([]),r=e([1]);s.Test.isFalse(t.sequenceEqual(r)),s.Test.isFalse(t.sequenceEqual(r.toArray()))}),it("Same count different values return false (number)",function(){var t=e([2]),r=e([1]);s.Test.isFalse(t.sequenceEqual(r)),s.Test.isFalse(t.sequenceEqual(r.toArray()))}),it("Different count return false (string)",function(){var t=e([]),r=e(["test1"]);s.Test.isFalse(t.sequenceEqual(r)),s.Test.isFalse(t.sequenceEqual(r.toArray()))}),it("Same count different values return false (string)",function(){var t=e(["test1"]),r=e(["test2"]);s.Test.isFalse(t.sequenceEqual(r)),s.Test.isFalse(t.sequenceEqual(r.toArray()))}),it("Same object in both return true",function(){var t={},r=e([t]),n=e([t]);s.Test.isTrue(r.sequenceEqual(n)),s.Test.isTrue(r.sequenceEqual(n.toArray()))});var r=function(e,t){return e.length===t.length};it("Custom comparer; check lengths; should return true (string)",function(){var t=e(["one"]),n=e(["two"]);s.Test.isTrue(t.sequenceEqual(n,r)),s.Test.isTrue(t.sequenceEqual(n.toArray(),r))}),it("Custom comparer; check lengths; should return false (string)",function(){var t=e(["three"]),n=e(["four"]);s.Test.isFalse(t.sequenceEqual(n,r)),s.Test.isFalse(t.sequenceEqual(n.toArray(),r))});var n=function(e,t){return e.age===t.age&&e.firstName===t.firstName};it("Custom comparer; same count; same objects; should return true (complex object)",function(){var r=new t("Ben","Jerry",42),i=e([r,r,r]),a=e([r,r,r]);s.Test.isTrue(i.sequenceEqual(a,n)),s.Test.isTrue(i.sequenceEqual(a.toArray(),n))}),it("Custom comparer; same count; different objects with same values; should return true (complex object)",function(){var r=new t("Ben","Jerry",42),i=new t("Ben","Smith",42),a=e([r,i,r]),u=e([i,r,i]);s.Test.isTrue(a.sequenceEqual(u,n)),s.Test.isTrue(a.sequenceEqual(u.toArray(),n))}),it("Custom comparer; same count; different objects with different values; should return false (complex object)",function(){var r=new t("Ben","Jerry",42),i=new t("John","Smith",42),a=e([r,i,r]),u=e([i,r,i]);s.Test.isFalse(a.sequenceEqual(u,n)),s.Test.isFalse(a.sequenceEqual(u.toArray(),n))}),it("ArrayQueryable<T> vs different IQueryable<T> must fallback to iterator approach",function(){var r=new t("Ben","Jerry",42),i=new t("John","Smith",42),a=new u.List([r,i,r]),o=e([i,r,i]);s.Test.isFalse(a.sequenceEqual(o,n)),s.Test.isFalse(a.sequenceEqual(o.toArray(),n))})}function U(e){it("Exception if empty (no selector)",function(){var t=e([]);s.Test.throwsException(function(){return t.single()})}),it("Exception if empty (with selector)",function(){var t=e([]);s.Test.throwsException(function(){return t.single(function(e){return!0})})}),it("Value is correct (single element)",function(){var t=e([33]);s.Test.isEqual(t.single(),33)}),it("Value is correct (multiple elements)",function(){var t=e([-2,4,65,32,1,36,7,2]);s.Test.isEqual(t.single(function(e){return e>60}),65),s.Test.isEqual(t.single(function(e){return e%6==0}),36)}),it("Exception if no element was found",function(){var t=e([-2,4,65,32,1,36,7,2]);s.Test.throwsException(function(){return t.single(function(e){return 11811===e})})}),it("Exception if more than 1 element was found",function(){var t=e([-2,4,65,32,1,36,7,2]);s.Test.throwsException(function(){return t.single()}),s.Test.throwsException(function(){return t.single(function(e){return e>5})})})}function L(e){it("Undefined if empty (no selector)",function(){var t=e([]);s.Test.isEqual(t.singleOrDefault(),void 0)}),it("Undefined if empty (with selector)",function(){var t=e([]);s.Test.isEqual(t.singleOrDefault(function(e){return!0}),void 0)}),it("Value is correct (single element)",function(){var t=e([33]);s.Test.isEqual(t.singleOrDefault(),33)}),it("Value is correct (multiple elements)",function(){var t=e([-2,4,65,32,1,36,7,2]);s.Test.isEqual(t.singleOrDefault(function(e){return e>60}),65),s.Test.isEqual(t.singleOrDefault(function(e){return e%6==0}),36)}),it("Undefined if no element was found",function(){var t=e([-2,4,65,32,1,36,7,2]);s.Test.isEqual(t.singleOrDefault(function(e){return 11811===e}),void 0)}),it("Exception if more than 1 element was found",function(){var t=e([-2,4,65,32,1,36,7,2]);s.Test.throwsException(function(){return t.singleOrDefault()}),s.Test.throwsException(function(){return t.singleOrDefault(function(e){return e>5})})})}function M(e){it("Exception if negative amount",function(){var t=e([-2,4,65,32,1,36,7,2]);s.Test.throwsException(function(){return t.skip(-666)})}),it("Value is same (skipping 0 elements)",function(){var t=e([-2,4,65,32,1,36,7,2]);s.Test.isArrayEqual(t.skip(0).toArray(),[-2,4,65,32,1,36,7,2])}),it("Value is correct",function(){var t=e([-2,4,65,32,1,36,7,2]);s.Test.isArrayEqual(t.skip(1).toArray(),[4,65,32,1,36,7,2]),s.Test.isArrayEqual(t.skip(3).toArray(),[32,1,36,7,2]),s.Test.isArrayEqual(t.skip(6).toArray(),[7,2])}),it("Empty if amount >= count",function(){var t=e([-2,4,65,32,1,36,7,2]);s.Test.isArrayEqual(t.skip(8).toArray(),[]),s.Test.isArrayEqual(t.skip(99).toArray(),[]),s.Test.isArrayEqual(t.skip(666).toArray(),[])}),it("Exception if index is out of bounds",function(){var t=e([-2,4]).skip(1);s.Test.throwsException(function(){return t.value()}),s.Test.isTrue(t.next()),s.Test.isEqual(t.value(),4),s.Test.isFalse(t.next()),s.Test.throwsException(function(){return t.value()})})}function P(e){it("Value is correct",function(){var t=e([-2,4,65,32,1,36,7,2]);s.Test.isArrayEqual(t.skip(2).take(2).toArray(),[65,32]),s.Test.isArrayEqual(t.skip(7).take(5).toArray(),[2])}),it("Exception if index is out of bounds",function(){var t=e([-2,4,5,6]).skip(1).take(2);s.Test.throwsException(function(){return t.value()}),s.Test.isTrue(t.next()),s.Test.isEqual(t.value(),4),s.Test.isTrue(t.next()),s.Test.isEqual(t.value(),5),s.Test.isFalse(t.next()),s.Test.throwsException(function(){return t.value()})})}function j(e){it("Empty if empty (true)",function(){var t=e([]);s.Test.isArrayEqual(t.skipWhile(function(e){return!0}).toArray(),[])}),it("Empty if empty (false)",function(){var t=e([]);s.Test.isArrayEqual(t.skipWhile(function(e){return!1}).toArray(),[])}),it("Empty if empty (true) (iterator)",function(){var t=e([]);s.Test.isArrayEqual(new a.Enumerable(t.skipWhile(function(e){return!0})).toArray(),[])}),it("Empty if empty (false) (iterator)",function(){var t=e([]);s.Test.isArrayEqual(new a.Enumerable(t.skipWhile(function(e){return!1})).toArray(),[])}),it("Value is correct (returns elements)",function(){var t=e([39,40,21,66,20]).skipWhile(function(e){return e>=39});s.Test.isArrayEqual(t.toArray(),[21,66,20])}),it("Value is correct (no elements)",function(){var t=e([39,21,66,20]).skipWhile(function(e){return e<90});s.Test.isArrayEqual(t.toArray(),[])}),it("Value is correct (returns elements) (iterator)",function(){var t=e([39,21,66,20]),r=new a.Enumerable(t.skipWhile(function(e){return e>=39}));s.Test.isArrayEqual(r.toArray(),[21,66,20])}),it("Value is correct (no elements) (iterator)",function(){var t=e([39,21,66,20]),r=new a.Enumerable(t.skipWhile(function(e){return e<90}));s.Test.isArrayEqual(r.toArray(),[])})}function K(e){it("Zero if empty",function(){var t=e([]);s.Test.isEqual(t.sum(function(e){return e}),0)}),it("Value is correct (single element)",function(){var t=e([2]);s.Test.isEqual(t.sum(function(e){return e}),2)}),it("Value is correct (multiple elements)",function(){var t=e([3,4,-20,1]);s.Test.isEqual(t.sum(function(e){return e}),-12)})}function W(e){it("Exception if negative amount",function(){var t=e([-2,4,65,32,1,36,7,2]);s.Test.throwsException(function(){return t.take(-666)})}),it("Value is empty (take 0 elements)",function(){var t=e([-2,4,65,32,1,36,7,2]);s.Test.isArrayEqual(t.take(0).toArray(),[])}),it("Value is correct",function(){var t=e([-2,4,65,32,1,36,7,2]);s.Test.isArrayEqual(t.take(1).toArray(),[-2]),s.Test.isArrayEqual(t.take(3).toArray(),[-2,4,65]),s.Test.isArrayEqual(t.take(6).toArray(),[-2,4,65,32,1,36])}),it("Value is correct (amount >= count)",function(){var t=e([-2,4,65,32,1,36,7,2]);s.Test.isArrayEqual(t.take(8).toArray(),[-2,4,65,32,1,36,7,2]),s.Test.isArrayEqual(t.take(99).toArray(),[-2,4,65,32,1,36,7,2]),s.Test.isArrayEqual(t.take(666).toArray(),[-2,4,65,32,1,36,7,2])}),it("Exception if index is out of bounds",function(){var t=e([-2,4]).take(1);s.Test.throwsException(function(){return t.value()}),s.Test.isTrue(t.next()),s.Test.isEqual(t.value(),-2),s.Test.isFalse(t.next()),s.Test.throwsException(function(){return t.value()})})}function N(e){it("Empty if empty (true)",function(){var t=e([]);s.Test.isArrayEqual(t.takeWhile(function(e){return!0}).toArray(),[])}),it("Empty if empty (false)",function(){var t=e([]);s.Test.isArrayEqual(t.takeWhile(function(e){return!1}).toArray(),[])}),it("Empty if empty (true) (iterator)",function(){var t=e([]);s.Test.isArrayEqual(new a.Enumerable(t.takeWhile(function(e){return!0})).toArray(),[])}),it("Empty if empty (false) (iterator)",function(){var t=e([]);s.Test.isArrayEqual(new a.Enumerable(t.takeWhile(function(e){return!1})).toArray(),[])}),it("Value is correct (returns elements)",function(){var t=e([39,40,21,66,20]).takeWhile(function(e){return e>=39});s.Test.isArrayEqual(t.toArray(),[39,40])}),it("Value is correct (no elements)",function(){var t=e([39,21,66,20]).takeWhile(function(e){return e>90});s.Test.isArrayEqual(t.toArray(),[])}),it("Value is correct (returns elements) (iterator)",function(){var t=e([39,40,21,66,20]),r=new a.Enumerable(t.takeWhile(function(e){return e>=39}));s.Test.isArrayEqual(r.toArray(),[39,40])}),it("Value is correct (no elements) (iterator)",function(){var t=e([39,21,66,20]),r=new a.Enumerable(t.takeWhile(function(e){return e>90}));s.Test.isArrayEqual(r.toArray(),[])})}function J(e){it("Empty returns empty",function(){var t=e([]),r=e([]),n=t.union(r);s.Test.isArrayEqual(n.toArray(),[])}),it("Empty returns empty (iterator)",function(){var t=e([]),r=e([]),n=new a.Enumerable(t.union(r));s.Test.isArrayEqual(n.toArray(),[])}),it("Value is correct",function(){var t=e([1,2,3,4]),r=e([2,5,6,1,7]),n=t.union(r);s.Test.isArrayEqual(n.toArray(),[1,2,3,4,5,6,7])}),it("Value is correct (iterator)",function(){var t=e([1,2,3,4]),r=e([2,5,6,1,7]),n=new a.Enumerable(t.union(r));s.Test.isArrayEqual(n.toArray(),[1,2,3,4,5,6,7])}),it("Value is correct (left is empty)",function(){var t=e([1,2,3,4]),r=e([]),n=t.union(r);s.Test.isArrayEqual(n.toArray(),[1,2,3,4])}),it("Value is correct (left is empty) (iterator)",function(){var t=e([]),r=e([1,2,3,4]),n=new a.Enumerable(t.union(r));s.Test.isArrayEqual(n.toArray(),[1,2,3,4])}),it("Value is correct (right is empty)",function(){var t=e([]),r=e([1,2,3,4]),n=t.union(r);s.Test.isArrayEqual(n.toArray(),[1,2,3,4])}),it("Value is correct (right is empty) (iterator)",function(){var t=e([1,2,3,4]),r=e([]),n=new a.Enumerable(t.union(r));s.Test.isArrayEqual(n.toArray(),[1,2,3,4])})}function G(e){it("Empty if empty",function(){var t=e([]);s.Test.isArrayEqual(t.where(function(e){return!0}).toArray(),[])}),it("Value is correct (returns elements)",function(){var t=e([39,21,66,20]).where(function(e){return e<30});s.Test.isArrayEqual(t.toArray(),[21,20])}),it("Value is correct (no elements)",function(){var t=e([39,21,66,20]).where(function(e){return e>90});s.Test.isArrayEqual(t.toArray(),[])}),it("Empty if empty (iterator)",function(){var t=e([]);s.Test.isArrayEqual(new a.Enumerable(t.where(function(e){return!0})).toArray(),[])}),it("Value is correct (returns elements) (iterator)",function(){var t=e([39,21,66,20]),r=new a.Enumerable(t.where(function(e){return e<30}));s.Test.isArrayEqual(r.toArray(),[21,20])}),it("Value is correct (no elements) (iterator)",function(){var t=e([39,21,66,20]),r=new a.Enumerable(t.where(function(e){return e>90}));s.Test.isArrayEqual(r.toArray(),[])})}function Q(e){it("Return empty if empty source (iterator)",function(){var t=e([]),r=new a.Enumerable(t.orderBy(function(e){return e}).thenBy(function(e){return e}));s.Test.isArrayEqual(r.toArray(),[])}),it("Simple order 1 (iterator)",function(){var t=[{id:1,day:4},{id:2,day:7},{id:3,day:4},{id:4,day:9},{id:5,day:1}],r=e(t),n=new a.Enumerable(r.orderBy(function(e){return e.day}).thenBy(function(e){return e.id}));s.Test.isArrayEqual(n.toArray(),[t[4],t[0],t[2],t[1],t[3]])}),it("Simple order 2 (iterator)",function(){var t=[{id:5,day:7},{id:2,day:5},{id:3,day:4},{id:1,day:7},{id:4,day:4}],r=e(t),n=new a.Enumerable(r.orderBy(function(e){return e.day}).thenBy(function(e){return e.id}));s.Test.isArrayEqual(n.toArray(),[t[2],t[4],t[1],t[3],t[0]])}),it("Simple order (custom comparer) (iterator)",function(){var t=[{id:1,day:4},{id:2,day:7},{id:3,day:4},{id:4,day:9},{id:5,day:1}],r=e(t),n=new a.Enumerable(r.orderBy(function(e){return e.day}).thenBy(function(e){return e.id},function(e,t){return e<3?1:-1}));s.Test.isArrayEqual(n.toArray(),[t[4],t[2],t[0],t[1],t[3]])}),it("Return empty if empty source",function(){var t=e([]).orderBy(function(e){return e}).thenBy(function(e){return e});s.Test.isArrayEqual(t.toArray(),[])}),it("Simple order 1",function(){var t=[{id:1,day:4},{id:2,day:7},{id:3,day:4},{id:4,day:9},{id:5,day:1}],r=e(t).orderBy(function(e){return e.day}).thenBy(function(e){return e.id});s.Test.isArrayEqual(r.toArray(),[t[4],t[0],t[2],t[1],t[3]])}),it("Simple order 2",function(){var t=[{id:5,day:7},{id:2,day:5},{id:3,day:4},{id:1,day:7},{id:4,day:4}],r=e(t).orderBy(function(e){return e.day}).thenBy(function(e){return e.id});s.Test.isArrayEqual(r.toArray(),[t[2],t[4],t[1],t[3],t[0]])}),it("Simple order (custom comparer)",function(){var t=[{id:1,day:4},{id:2,day:7},{id:3,day:4},{id:4,day:9},{id:5,day:1}],r=e(t).orderBy(function(e){return e.day}).thenBy(function(e){return e.id},function(e,t){return e<3?1:-1});s.Test.isArrayEqual(r.toArray(),[t[4],t[2],t[0],t[1],t[3]])})}function z(e){it("Return empty if empty source (iterator)",function(){var t=e([]),r=new a.Enumerable(t.orderBy(function(e){return e}).thenByDescending(function(e){return e}));s.Test.isArrayEqual(r.toArray(),[])}),it("Simple order 1 (iterator)",function(){var t=[{id:1,day:4},{id:2,day:7},{id:3,day:4},{id:4,day:9},{id:5,day:1}],r=e(t),n=new a.Enumerable(r.orderBy(function(e){return e.day}).thenByDescending(function(e){return e.id}));s.Test.isArrayEqual(n.toArray(),[t[4],t[2],t[0],t[1],t[3]])}),it("Simple order 2 (iterator)",function(){var t=[{id:5,day:7},{id:2,day:5},{id:3,day:4},{id:1,day:7},{id:4,day:4}],r=e(t),n=new a.Enumerable(r.orderBy(function(e){return e.day}).thenByDescending(function(e){return e.id}));s.Test.isArrayEqual(n.toArray(),[t[4],t[2],t[1],t[0],t[3]])}),it("Return empty if empty source",function(){var t=e([]).orderBy(function(e){return e}).thenByDescending(function(e){return e});s.Test.isArrayEqual(t.toArray(),[])}),it("Simple order 1",function(){var t=[{id:1,day:4},{id:2,day:7},{id:3,day:4},{id:4,day:9},{id:5,day:1}],r=e(t).orderBy(function(e){return e.day}).thenByDescending(function(e){return e.id});s.Test.isArrayEqual(r.toArray(),[t[4],t[2],t[0],t[1],t[3]])}),it("Simple order 2",function(){var t=[{id:5,day:7},{id:2,day:5},{id:3,day:4},{id:1,day:7},{id:4,day:4}],r=e(t).orderBy(function(e){return e.day}).thenByDescending(function(e){return e.id});s.Test.isArrayEqual(r.toArray(),[t[4],t[2],t[1],t[0],t[3]])})}function H(e){it("Return empty if empty source",function(){var t=e([]).groupBy(function(e){return e.id});s.Test.isArrayEqual(t.toArray(),[])}),it("Return empty if empty source (value selector)",function(){var t=e([]).groupBy(function(e){return e.id},function(e){return e.name});s.Test.isArrayEqual(t.toArray(),[])}),it("Grouping is correct",function(){var t=[{id:1,type:3,name:"Ivan"},{id:2,type:2,name:"Juanmari"},{id:3,type:3,name:"Uxue"},{id:4,type:2,name:"Begoña"},{id:5,type:1,name:"Juanito"}],r=e(t).groupBy(function(e){return e.type}).toDictionary(function(e){return e.key},function(e){return e.value});s.Test.isFalse(r.containsKey(0)),s.Test.isTrue(r.containsKey(1)),s.Test.isTrue(r.containsKey(2)),s.Test.isTrue(r.containsKey(3)),s.Test.isFalse(r.containsKey(4)),s.Test.isArrayEqual(r.get(1).toArray(),[t[4]]),s.Test.isArrayEqual(r.get(2).toArray(),[t[1],t[3]]),s.Test.isArrayEqual(r.get(3).toArray(),[t[0],t[2]])}),it("Grouping is correct (value selector)",function(){var t=e([{id:1,type:3,name:"Ivan"},{id:2,type:2,name:"Juanmari"},{id:3,type:3,name:"Uxue"},{id:4,type:2,name:"Begoña"},{id:5,type:1,name:"Juanito"}]).groupBy(function(e){return e.type},function(e){return e.name});s.Test.isFalse(t.any(function(e){return 0===e.key})),s.Test.isTrue(t.any(function(e){return 1===e.key})),s.Test.isTrue(t.any(function(e){return 2===e.key})),s.Test.isTrue(t.any(function(e){return 3===e.key})),s.Test.isFalse(t.any(function(e){return 4===e.key})),s.Test.isArrayEqual(t.single(function(e){return 1===e.key}).value.toArray(),["Juanito"]),s.Test.isArrayEqual(t.single(function(e){return 2===e.key}).value.toArray(),["Juanmari","Begoña"]),s.Test.isArrayEqual(t.single(function(e){return 3===e.key}).value.toArray(),["Ivan","Uxue"])})}}(t.IQueryableUnitTest||(t.IQueryableUnitTest={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2),i=r(3),a=r(0);!function(e){function t(){var e=n.Enumerable.fromSource(new i.ArrayIterator([]));a.Test.isFalse(e.next()),a.Test.throwsException(function(){return e.value()}),e=n.Enumerable.fromSource(new i.ArrayIterator([2,4,6])),a.Test.isTrue(e.next()),a.Test.isEqual(e.value(),2),a.Test.isTrue(e.next()),a.Test.isEqual(e.value(),4),a.Test.isTrue(e.next()),a.Test.isEqual(e.value(),6),a.Test.isFalse(e.next()),a.Test.throwsException(function(){return e.value()}),e=n.Enumerable.fromSource(n.Enumerable.fromSource(new i.ArrayIterator([]))),a.Test.isFalse(e.next()),a.Test.throwsException(function(){return e.value()}),e=n.Enumerable.fromSource(n.Enumerable.fromSource([2,4,6])),a.Test.isTrue(e.next()),a.Test.isEqual(e.value(),2),a.Test.isTrue(e.next()),a.Test.isEqual(e.value(),4),a.Test.isTrue(e.next()),a.Test.isEqual(e.value(),6),a.Test.isFalse(e.next()),a.Test.throwsException(function(){return e.value()})}function r(){var e=n.Enumerable.empty();a.Test.isArrayEqual(e.toArray(),[])}function u(){it("Negative count throws exception",function(){a.Test.throwsException(function(){return n.Enumerable.range(0,-1)}),a.Test.throwsException(function(){return n.Enumerable.range(5,-666)})}),it("Zero count returns empty",function(){var e=n.Enumerable.range(0,0);a.Test.isArrayEqual(e.toArray(),[]),e=n.Enumerable.range(4,0),a.Test.isArrayEqual(e.toArray(),[])}),it("Value is correct",function(){var e=n.Enumerable.range(2,3);a.Test.isArrayEqual(e.toArray(),[2,3,4]),e=n.Enumerable.range(-2,4),a.Test.isArrayEqual(e.toArray(),[-2,-1,0,1]),e=n.Enumerable.range(0,6),a.Test.isArrayEqual(e.toArray(),[0,1,2,3,4,5]),e=n.Enumerable.range(0,1e6),a.Test.isArrayEqual(e.toArray(),e.toArray())}),it("Negative count throws exception (descending)",function(){a.Test.throwsException(function(){return n.Enumerable.range(0,-1,!1)}),a.Test.throwsException(function(){return n.Enumerable.range(5,-666,!1)})}),it("Zero count returns empty (descending)",function(){var e=n.Enumerable.range(0,0,!1);a.Test.isArrayEqual(e.toArray(),[]),e=n.Enumerable.range(4,0,!1),a.Test.isArrayEqual(e.toArray(),[])}),it("Value is correct (descending)",function(){var e=n.Enumerable.range(2,3,!1);a.Test.isArrayEqual(e.toArray(),[2,1,0]),e=n.Enumerable.range(-2,4,!1),a.Test.isArrayEqual(e.toArray(),[-2,-3,-4,-5]),e=n.Enumerable.range(0,6,!1),a.Test.isArrayEqual(e.toArray(),[0,-1,-2,-3,-4,-5]),e=n.Enumerable.range(0,1e6,!1),a.Test.isArrayEqual(e.toArray(),e.toArray())})}function o(){a.Test.throwsException(function(){return n.Enumerable.repeat(0,-1)}),a.Test.throwsException(function(){return n.Enumerable.repeat(5,-60)}),a.Test.throwsException(function(){return n.Enumerable.repeat(-5,-1)});var e=n.Enumerable.repeat(3,0);a.Test.isArrayEqual(e.toArray(),[]),e=n.Enumerable.repeat(3,4),a.Test.isArrayEqual(e.toArray(),[3,3,3,3]);var t=n.Enumerable.repeat("a",0);a.Test.isArrayEqual(t.toArray(),[]),t=n.Enumerable.repeat("a",2),a.Test.isArrayEqual(t.toArray(),["a","a"])}e.run=function(){it("FromSource",t),it("Empty",r),describe("Range",u),it("Repeat",o)}}(t.EnumerableUnitTest||(t.EnumerableUnitTest={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=r(3),a=r(2);!function(e){function t(e,t){describe(e+" (ArrayIterator)",function(){return t(function(e){return new i.ArrayIterator(e)})}),describe(e+" (Enumerable)",function(){return t(function(e){return new a.Enumerable(new i.ArrayIterator(e))})}),describe(e+" (ConditionalEnumerable)",function(){return t(function(e){return new a.ConditionalEnumerable(a.Enumerable.fromSource(e),function(e){return!0})})}),describe(e+" (ConcatEnumerable)",function(){return t(function(e){return e.length>1?new a.ConcatEnumerable(a.Enumerable.fromSource([e[0]]),a.Enumerable.fromSource(e.slice(1))):new a.ConcatEnumerable(a.Enumerable.fromSource(e),a.Enumerable.fromSource([]))})}),describe(e+" (OrderedEnumerable)",function(){return t(function(e){return new a.OrderedEnumerable(a.Enumerable.fromSource(e),function(e,t){return 0})})}),describe(e+" (RangeEnumerable)",function(){return t(function(e){return new a.RangeEnumerable(a.Enumerable.fromSource(e),void 0,void 0)})}),describe(e+" (TransformEnumerable)",function(){return t(function(e){return new a.TransformEnumerable(a.Enumerable.fromSource(e),function(e){return e})})}),describe(e+" (ReverseEnumerable)",function(){return t(function(e){return new a.ReverseEnumerable(new a.ReverseEnumerable(a.Enumerable.fromSource(e)))})}),describe(e+" (OrderedEnumerable)",function(){return t(function(e){return new a.OrderedEnumerable(a.Enumerable.fromSource(e),function(e,t){return 0})})}),describe(e+" (ArrayEnumerable)",function(){return t(function(e){return new a.ArrayEnumerable(e)})})}function r(e){it("Return false for empty collection",function(){var t=e([]);n.Test.isFalse(t.next())}),it("Iterate over elements + return false in the end",function(){var t=e([1,2,3]);n.Test.isTrue(t.next()),n.Test.isTrue(t.next()),n.Test.isTrue(t.next()),n.Test.isFalse(t.next())})}function u(e){it("Iterator is resetted correctly",function(){var t=e([1,2]);n.Test.isTrue(t.next()),n.Test.isTrue(t.next()),n.Test.isFalse(t.next()),t.reset(),n.Test.isTrue(t.next()),n.Test.isTrue(t.next()),n.Test.isFalse(t.next()),t.reset(),n.Test.isTrue(t.next()),t.reset(),n.Test.isTrue(t.next()),n.Test.isTrue(t.next()),n.Test.isFalse(t.next())}),it("Multiple reset in a row act like single one",function(){var t=e([1,2]);t.reset(),t.reset(),t.reset(),n.Test.isTrue(t.next()),n.Test.isTrue(t.next()),n.Test.isFalse(t.next()),t.reset(),t.reset(),t.reset(),n.Test.isTrue(t.next()),n.Test.isTrue(t.next()),n.Test.isFalse(t.next()),t.reset(),t.reset(),t.reset()})}function o(e){it("Exception if getting an out of bounds value",function(){var t=e([]);n.Test.isFalse(t.next()),n.Test.throwsException(function(){return t.value()})}),it("Get values",function(){var t=e([2,4,6]);n.Test.isTrue(t.next()),n.Test.isEqual(t.value(),2),n.Test.isTrue(t.next()),n.Test.isEqual(t.value(),4),n.Test.isTrue(t.next()),n.Test.isEqual(t.value(),6),n.Test.isFalse(t.next())}),it("Get values + exception in the end (out of bounds)",function(){var t=e([2,4]);n.Test.isTrue(t.next()),n.Test.isEqual(t.value(),2),n.Test.isTrue(t.next()),n.Test.isEqual(t.value(),4),n.Test.isFalse(t.next()),n.Test.throwsException(function(){return t.value()})})}function s(e){it("Cloned iterator is resetted by default",function(){var t=e([2,4,6]);n.Test.isTrue(t.next()),n.Test.isEqual(t.value(),2);var r=t.copy();n.Test.isTrue(r.next()),n.Test.isEqual(r.value(),2)}),it("Cloned iterator doesn't affect original one",function(){var t=e([2,4,6]);n.Test.isTrue(t.next()),n.Test.isEqual(t.value(),2);var r=t.copy();r.next(),r.next(),n.Test.isTrue(t.next()),n.Test.isEqual(t.value(),4),r.reset(),n.Test.isTrue(t.next()),n.Test.isEqual(t.value(),6),n.Test.isFalse(t.next())}),it("Cloned iterator is identical to original",function(){var t=e([2,4,6]),r=t.copy();n.Test.isTrue(t.next()),n.Test.isEqual(t.value(),2),n.Test.isTrue(r.next()),n.Test.isEqual(r.value(),2),n.Test.isTrue(t.next()),n.Test.isEqual(t.value(),4),n.Test.isTrue(r.next()),n.Test.isEqual(r.value(),4),n.Test.isTrue(t.next()),n.Test.isEqual(t.value(),6),n.Test.isTrue(r.next()),n.Test.isEqual(r.value(),6),n.Test.isFalse(t.next()),n.Test.isFalse(r.next())})}e.run=function(){t("Next",r),t("Reset",u),t("Value",o),t("Clone",s)}}(t.IteratorUnitTest||(t.IteratorUnitTest={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(5),i=r(0);!function(e){function t(){it("Starts invalidated",function(){var e=new n.Cached;i.Test.isFalse(e.isValid())})}function r(){it("Throws exception if invalid",function(){var e=new n.Cached;i.Test.isFalse(e.isValid()),i.Test.throwsException(function(){e.value})}),it("Validate on value set",function(){var e=new n.Cached;i.Test.isFalse(e.isValid()),e.value=33,i.Test.isTrue(e.isValid())}),it("Get value",function(){var e=new n.Cached;e.value=33,i.Test.isEqual(e.value,33)})}function a(){it("Do nothing if already invalid",function(){var e=new n.Cached;i.Test.isFalse(e.isValid()),e.invalidate(),e.invalidate(),e.invalidate(),i.Test.isFalse(e.isValid())}),it("Make invalid if it was valid",function(){var e=new n.Cached;i.Test.isFalse(e.isValid()),e.value=33,i.Test.isTrue(e.isValid()),e.invalidate(),i.Test.isFalse(e.isValid())})}e.run=function(){describe("Constructor",t),describe("Value",r),describe("Invalidate",a)}}(t.UtilsUnitTest||(t.UtilsUnitTest={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(13),i=r(12),a=r(11),u=r(10),o=r(9),s=r(8),c=r(7),l=r(6);describe("Unit Tests",function(){describe("Utils",n.UtilsUnitTest.run),describe("Enumerable (static)",a.EnumerableUnitTest.run),describe("Iterators",i.IteratorUnitTest.run),describe("IQueryable",u.IQueryableUnitTest.run),describe("List",o.ListUnitTest.run),describe("Stack",s.StackUnitTest.run),describe("Dictionary",l.DictionaryUnitTest.run)}),describe("Integration Tests",function(){describe("IEnumerable",c.IEnumerableIntegrationTest.run)})}]);